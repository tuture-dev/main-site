---
title: 'Django + Nuxt å®ç°ç¾é£Ÿåˆ†äº«ç½‘ç«™ï¼ˆä¸€ï¼‰'
description: 'Django ä½œä¸º Python ç¤¾åŒºæœ€å—æ¬¢è¿çš„ Web æ¡†æ¶ä¹‹ä¸€ï¼Œå‡­å€Ÿå…¶é«˜åº¦æŠ½è±¡çš„ç»„ä»¶å’Œå¼ºå¤§æ–¹ä¾¿çš„è„šæ‰‹æ¶ï¼Œå°†å¿«é€Ÿä¸”æµç•…çš„å¼€å‘ä½“éªŒæ¼”ç»åˆ°äº†æè‡´ã€‚è€Œ Nuxt ä½œä¸ºä» Vue.js è¿›åŒ–è€Œæ¥çš„å‰ç«¯æ¡†æ¶ï¼Œèƒ½å¤Ÿè½»æ¾èƒœä»»å¤æ‚çš„ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰å¼€å‘ã€‚ä¸¤è€…ç›¸é‡ï¼Œèƒ½å¤Ÿæ“¦å‡ºæ€æ ·çš„ç«èŠ±ï¼Ÿè¿™ç¯‡æ•™ç¨‹å°†ç”¨ Django + Nuxt å®ç°å¸¦æœ‰å®Œæ•´çš„å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰åŠŸèƒ½çš„å…¨æ ˆåº”ç”¨ã€‚æœ€åéƒ‘é‡è­¦å‘Šï¼šä¸è¦åœ¨æ·±å¤œé˜…è¯»æ­¤æ•™ç¨‹ï¼ï¼ï¼'
tags: ['Django', 'Vue', 'Nuxt']
categories: ['åç«¯', 'Python', 'è¿›é˜¶']
date: 2019-10-18T00:00:00.509Z
photos:
  - https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/cover-1.jpg
---

## é¡¹ç›®åˆå§‹åŒ–

åœ¨è¿™ä¸€ç³»åˆ—æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¼šå®ç°ä¸€ä¸ªå…¨æ ˆç¾é£Ÿåˆ†äº«ç½‘ç«™ï¼Œåç«¯ç”¨ Django å®ç°ï¼Œå‰ç«¯åˆ™æ˜¯ Nuxt æ¡†æ¶ï¼Œä¸‹é¢æ˜¯æœ€ç»ˆå®Œæˆåçš„é¡¹ç›®æ•ˆæœï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/demo.gif)

### é¢„å¤‡çŸ¥è¯†

æœ¬æ•™ç¨‹å‡å®šä½ å·²ç»çŸ¥é“äº†

- åŸºæœ¬çš„ Python 3 è¯­è¨€çŸ¥è¯†ï¼ŒåŒ…æ‹¬ä½¿ç”¨ pip å®‰è£…åŒ…
- Django æ¡†æ¶çš„åŸºç¡€æ¦‚å¿µï¼ˆMTV æ¶æ„ï¼‰ï¼Œå¯å‚è€ƒè¿™ç¯‡[å¿«é€Ÿå…¥é—¨æ•™ç¨‹](https://tuture.co/2019/11/19/55d393c/)è¿›è¡Œå­¦ä¹ 
- Vue çš„åŸºç¡€æ¦‚å¿µï¼Œä»¥åŠç”¨ npm å·¥å…·é“¾çš„ä½¿ç”¨ï¼Œå¯å‚è€ƒ[è¿™ç¯‡æ•™ç¨‹](https://tuture.co/2019/10/17/0b662ce/)
- å‰åç«¯åˆ†ç¦»çš„åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬å‰ç«¯å¦‚ä½•é€šè¿‡å‘èµ· HTTP(S) è¯·æ±‚ä»åç«¯è·å–æ•°æ®

### å­¦ä¹ ç›®æ ‡

å­¦å®Œè¿™ç¯‡æ•™ç¨‹åï¼Œä½ å°†ï¼š

- äº†è§£ç”¨ pipenv å·¥å…·ç®¡ç† Python ä¾èµ–
- å­¦ä¼šç”¨ Django REST Framework å¿«é€Ÿå¼€å‘ REST API
- å­¦ä¼šç”¨ Nuxt æ¡†æ¶å¿«é€Ÿå¼€å‘ SPAï¼ˆå•é¡µåº”ç”¨ï¼‰ï¼Œèƒ½å¤Ÿä»åç«¯è·å–æ•°æ®å¹¶æ¸²æŸ“

### ç”¨ pipenv åˆå§‹åŒ– Python ç¯å¢ƒ

é¦–å…ˆåˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œå¹¶è¿›å…¥ï¼š

```bash
$ mkdir recipes_app && cd recipes_app
```

åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç”¨ [pipenv](https://pipenv.kennethreitz.org/) æ¥ç®¡ç† Python é¡¹ç›®çš„ç¯å¢ƒä¾èµ–ã€‚Pipenv æ˜¯ Python ç¤¾åŒºå¶åƒçº§å¤§å¸ˆ Kenneth Reitz ç‰µå¤´å¼€å‘çš„å¼€å‘æµç¨‹ä¼˜åŒ–å·¥å…·ï¼Œç«‹å¿—é›†æ‰€æœ‰é¡¹ç›®ç®¡ç†å·¥å…·ï¼ˆNode çš„ npmã€Ruby çš„ bundlerã€PHP çš„ composer ç­‰ç­‰ï¼‰çš„ä¼˜åŠ¿ä¸ºä¸€ä½“ã€‚æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å®‰è£… pipenvï¼Œå¹¶åˆ›å»ºé¡¹ç›®çš„ä¾èµ–ç¯å¢ƒï¼š

```bash
$ pip install pipenv
$ pipenv shell
```

å¦‚æœçœ‹åˆ°å‘½ä»¤æç¤ºç¬¦å‰é¢å‡ºç° `(recipes_app-nV3wuGJ1)` çš„æç¤ºï¼ˆåé¢é‚£ä¸²éšæœºå­—ç¬¦ä¸²å¯èƒ½ä¸ä¸€æ ·ï¼‰ï¼Œå°±è¡¨æ˜æˆ‘ä»¬å·²ç»æˆåŠŸåœ°åˆ›å»ºäº†é¡¹ç›®ç‹¬æœ‰çš„è™šæ‹Ÿç¯å¢ƒï¼æˆ‘ä»¬æ¥ç€å®‰è£… Django â€œä¸‰ä»¶å¥—â€ï¼š

- **Django**: Django æ¡†æ¶æœ¬èº«ï¼Œæä¾›äº†ä¸°å¯Œä¸”å¼ºå¤§çš„æœåŠ¡å™¨å¼€å‘ç»„ä»¶ï¼›
- **DRF (Django Rest Framework)**ï¼šDjango æ¡†æ¶çš„è¶…çº§æ­æ¡£ï¼Œå¤§å¤§æ–¹ä¾¿äº† REST API çš„å¼€å‘ï¼›
- **Django CORS Headers**ï¼šç”¨äºå®ç°è·¨åŸŸèµ„æºè¯·æ±‚ï¼ˆCORSï¼‰çš„ Django ä¸­é—´ä»¶ï¼ˆå¦‚æœä½ ä¸äº†è§£ CORSï¼Œå¯ä»¥å‚è€ƒé˜®ä¸€å³°çš„[æ—¥å¿—](http://www.ruanyifeng.com/blog/2016/04/cors.html)ï¼‰ã€‚

å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š

```bash
(recipes_app-nV3wuGJ1) $ pipenv install django django-rest-framework django-cors-headers
```

è¿™æ—¶ pipenv ä¾¿äº§ç”Ÿäº† Pipfile æ–‡ä»¶ï¼Œå®ƒçš„ä½œç”¨å°±ç±»ä¼¼ Node é¡¹ç›®ä¸­çš„ package.json æ–‡ä»¶ï¼š

```Pipfile Pipfile
[[source]]
url = "https://mirrors.aliyun.com/pypi/simple/"
verify_ssl = true
name = "pypi"

[packages]
django = "*"
django-rest-framework = "*"
django-cors-headers = "*"

[dev-packages]

[requires]
python_version = "3.6"
```

ç„¶åç”¨ Django è„šæ‰‹æ¶åˆ›å»ºæœåŠ¡å™¨é¡¹ç›® `api` çš„åŸºæœ¬ç»“æ„ï¼Œå¹¶è¿›å…¥åˆ° `api`åˆ›å»ºä¸€ä¸ªå­åº”ç”¨ `core`ï¼š

```bash
(recipes_app-nV3wuGJ1) $ django-admin startproject api
(recipes_app-nV3wuGJ1) $ cd api
(recipes_app-nV3wuGJ1) $ python manage.py startapp core
```

æ¥ç€è¿›è¡Œæ•°æ®åº“è¿ç§»ï¼Œå¹¶åˆ›å»ºç”¨äºç™»å½•åå°ç®¡ç†çš„è¶…çº§ç”¨æˆ·ï¼š

```bash
(recipes_app-nV3wuGJ1) $ python manage.py migrate
(recipes_app-nV3wuGJ1) $ python manage.py createsuperuser
```

æŒ‰ç…§é—®é¢˜è¾“å…¥ä¿¡æ¯å³å¯ã€‚è¦è®°ä½ç”¨æˆ·åå’Œå¯†ç å“¦ï¼ç„¶åè¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š

```bash
(recipes_app-nV3wuGJ1) $ python manage.py runserver
```

è®¿é—® [http://localhost:8000/admin](http://localhost:8000/admin)ï¼Œå¯ä»¥çœ‹åˆ°åå°ç®¡ç†çš„ç™»å½•é¡µé¢ã€‚è¾“å…¥åˆšæ‰åˆ›å»ºçš„è¶…çº§ç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°±è¿›å…¥äº†åå°ç®¡ç†ç³»ç»Ÿï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/django-admin.png)

ç†Ÿæ‚‰çš„ç•Œé¢ï¼Œä½†æ˜¯â€”â€”æ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œè€Œä¸”å…¨æ˜¯è‹±æ–‡ï¼åˆ«æ‹…å¿ƒï¼Œåé¢æˆ‘ä»¬ä¼šä¸€ä¸ªä¸ªæå®šã€‚

## ç”¨ Django å®ç° REST API

æ¥ä¸‹æ¥æˆ‘ä»¬å°†å®ç°æœ¬é¡¹ç›®æ‰€éœ€è¦ç”¨çš„æ‰€æœ‰ APIã€‚å¯¹ï¼Œä½ æ²¡æœ‰å¬é”™ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™ä¸€æ­¥å®ç°æ‰€æœ‰åç«¯æ¥å£ï¼Œå¤§æ¦‚åª 10 åˆ†é’Ÿå·¦å³å¯ä»¥æ•²å®Œï¼è¿™å°±æ˜¯ Django çš„å®£è¨€ï¼š

> The web framework for perfectionists with deadlines.

â€œä¸ºèµ¶æ—¶é—´çš„å®Œç¾ä¸»ä¹‰è€…è€Œç”Ÿï¼â€

### å…¨å±€é…ç½®

é¦–å…ˆï¼Œåœ¨å…¨å±€é…ç½®æ–‡ä»¶ settings.py ä¸­åšå¦‚ä¸‹æ”¹åŠ¨ï¼š

1. åœ¨ `INSTALLED_APPS` ä¸­æ·»åŠ  `rest_framework`ã€`corsheaders` å’Œ `core`ï¼Œå‰ä¸¤ä¸ªåˆ†åˆ«æ˜¯ Django Rest Framework å’Œ Django CORS Headers çš„åº”ç”¨ï¼Œæœ€åä¸€ä¸ªæ˜¯æˆ‘ä»¬ç½‘ç«™çš„åº”ç”¨ï¼›
2. åœ¨ `MIDDLEWARE` ä¸­æ·»åŠ  `corsheaders.middleware.CorsMiddleware`ï¼Œæ³¨å†Œè·¨åŸŸè¯·æ±‚ä¸­é—´ä»¶ï¼ˆ**æ³¨æ„ä¸€å®šè¦æ”¾åœ¨æœ€å‰é¢ï¼**ï¼‰;
3. è®¾ç½® `CORS_ORIGIN_WHITELIST`ï¼Œæ·»åŠ è·¨åŸŸè¯·æ±‚ç™½åå•ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå†™ä¸Š `http://localhost:3000`ï¼Œåé¢å¼€å‘å‰ç«¯æ—¶å°†ç”¨åˆ°ï¼›
4. è®¾ç½® `LANGUAGE_CODE` ä¸º `zh-hans`ï¼Œå¯ä»¥å°†åå°ç®¡ç†è®¾ç½®ä¸ºä¸­æ–‡ï¼Œéå¸¸æ–¹ä¾¿ï¼›
5. è®¾ç½® `MEDIA_URL` å’Œ `MEDIA_ROOT`ï¼Œç”¨äºåœ¨å¼€å‘ä¸­æä¾›å›¾ç‰‡èµ„æºæ–‡ä»¶çš„è®¿é—®ã€‚

å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```py api/api/settings.py
// ...
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
[tuture-add]    'rest_framework',
[tuture-add]    'corsheaders',
[tuture-add]    'core',
]

MIDDLEWARE = [
[tuture-add]    'corsheaders.middleware.CorsMiddleware',
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    // ...
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

[tuture-add]CORS_ORIGIN_WHITELIST = (
[tuture-add]    'http://localhost:3000',
[tuture-add])
[tuture-add]
ROOT_URLCONF = 'api.urls'

TEMPLATES = [
    // ...
# Internationalization
# https://docs.djangoproject.com/en/2.0/topics/i18n/

[tuture-del]LANGUAGE_CODE = 'en-us'
[tuture-add]LANGUAGE_CODE = 'zh-hans'

TIME_ZONE = 'UTC'

// ...
# https://docs.djangoproject.com/en/2.0/howto/static-files/

STATIC_URL = '/static/'
[tuture-add]
[tuture-add]MEDIA_URL = '/media/'
[tuture-add]MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
```

### å®ç° core åº”ç”¨

æ¥ä¸‹æ¥å°±æ˜¯å®ç° `core` è¿™ä¸ª Django åº”ç”¨ã€‚å®ç°ä¸€ä¸ª Django åº”ç”¨å¤§è‡´éƒ½æ˜¯æŒ‰ç…§è¿™æ ·çš„æµç¨‹ï¼š

1. å®šä¹‰æ•°æ®æ¨¡å‹ï¼ˆmodels.pyï¼‰ï¼Œç”¨äºå®ç°å’Œæ•°æ®åº“ä¹‹é—´çš„ç»‘å®šï¼›
2. å®šä¹‰åå°ç®¡ç†é…ç½®ï¼ˆadmin.pyï¼‰ï¼Œç”¨äºåœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­è¿›è¡Œæ“ä½œï¼›
3. å®šä¹‰åºåˆ—åŒ–å™¨ï¼ˆserializers.pyï¼‰ï¼Œ_ä»…å½“å®ç° REST API æ—¶éœ€è¦_ï¼Œç”¨äºæä¾›æ•°æ®æ¨¡å‹çš„ JSON åºåˆ—åŒ–ï¼ˆæˆ–å…¶ä»–æ•°æ®äº¤æ¢æ ¼å¼ï¼‰ï¼›
4. å®šä¹‰è§†å›¾ï¼ˆviews.pyï¼‰ï¼Œç”¨äºå®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼›
5. å®šä¹‰è·¯ç”±ï¼ˆurls.pyï¼‰ï¼Œç”¨äºå®šä¹‰è·¯ç”±è§„åˆ™ï¼Œå°†å…¶æ˜ å°„åˆ°ç›¸åº”çš„è§†å›¾ï¼›
6. å°†åº”ç”¨è·¯ç”±æ¥å…¥å…¨å±€è·¯ç”±æ–‡ä»¶ï¼ˆapi/urls.pyï¼‰ä¸­ã€‚

æˆ‘ä»¬ä»ç¬¬ä¸€æ­¥å¼€å§‹ï¼Œå®Œæˆèœè°± `Recipe` æ•°æ®æ¨¡å‹å¦‚ä¸‹ï¼š

```py api/core/models.py
from django.db import models

[tuture-del]# Create your models here.
[tuture-add]
[tuture-add]class Recipe(models.Model):
[tuture-add]    DIFFICULTY_LEVELS = (
[tuture-add]        ('Easy', 'å®¹æ˜“'),
[tuture-add]        ('Medium', 'ä¸­ç­‰'),
[tuture-add]        ('Hard', 'å›°éš¾'),
[tuture-add]    )
[tuture-add]    name = models.CharField(max_length=120, verbose_name='åç§°')
[tuture-add]    ingredients = models.CharField(max_length=400, verbose_name='é£Ÿæ')
[tuture-add]    picture = models.FileField(verbose_name='å›¾ç‰‡')
[tuture-add]    difficulty = models.CharField(choices=DIFFICULTY_LEVELS, max_length=10,
[tuture-add]                                  verbose_name='åˆ¶ä½œéš¾åº¦')
[tuture-add]    prep_time = models.PositiveIntegerField(verbose_name='å‡†å¤‡æ—¶é—´')
[tuture-add]    prep_guide = models.TextField(verbose_name='åˆ¶ä½œæŒ‡å—')
[tuture-add]
[tuture-add]    class Meta:
[tuture-add]        verbose_name = 'é£Ÿè°±'
[tuture-add]        verbose_name_plural = 'é£Ÿè°±'
[tuture-add]
[tuture-add]    def __str__(self):
[tuture-add]        return '{} çš„é£Ÿè°±'.format(self.name)
```

å…¶ä¸­ï¼Œ`class Meta` å®šä¹‰äº† `Recipe` çš„å…ƒæ•°æ®ï¼›`__str__` æ–¹æ³•å®šä¹‰äº†ä¸€ä¸ªèœè°±å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶åº”è¯¥æ€æ ·æ˜¾ç¤ºã€‚è¿™äº›è®¾ç½®çš„ä½œç”¨åœ¨æ‰“å¼€åå°ç®¡ç†ç³»ç»Ÿä¹‹åå°±ä¼šå¾ˆæ¸…æ™°äº†ã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº Django æ•°æ®æ¨¡å‹çš„çŸ¥è¯†ï¼Œè¯·å‚è€ƒç›¸å…³[ä¸­æ–‡æ–‡æ¡£](https://docs.djangoproject.com/zh-hans/2.2/topics/db/models/)ã€‚

ç¬¬äºŒæ­¥ï¼Œä¸º `core` å­åº”ç”¨é…ç½®ç›¸åº”çš„åå°ç®¡ç†åŠŸèƒ½ã€‚éå¸¸ç®€å•ï¼Œåªéœ€æ³¨å†Œå®šä¹‰å¥½çš„ `Recipe` æ¨¡å‹ï¼š

```py api/core/admin.py
from django.contrib import admin
[tuture-add]from .models import Recipe

# Register your models here.
[tuture-add]admin.site.register(Recipe)
```

ç¬¬ä¸‰æ­¥ï¼Œå®šä¹‰åºåˆ—åŒ–å™¨ serializers.pyï¼ˆè„šæ‰‹æ¶å¹¶ä¸ä¼šè‡ªåŠ¨åˆ›å»ºï¼Œéœ€è¦æ‰‹åŠ¨åˆ›å»ºï¼‰ã€‚åºåˆ—åŒ–å™¨æ˜¯ Django Rest Framework æä¾›çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿéå¸¸æ–¹ä¾¿åœ°å°† Django æ•°æ®æ¨¡å‹åºåˆ—åŒ–æˆç›¸åº”çš„ JSON æ•°æ®æ ¼å¼ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª `RecipeSerializer`ï¼Œå¹¶åœ¨ `class Meta` ä¸­æŒ‡å®šå¯¹åº”çš„æ•°æ®æ¨¡å‹ä¸ºåˆšæ‰åˆ›å»ºçš„ `Recipe`ï¼Œå¹¶é€‰æ‹©ç›¸åº”çš„å­—æ®µå±•ç¤ºï¼š

```py api/core/serializers.py
from rest_framework import serializers
from .models import Recipe

class RecipeSerializer(serializers.ModelSerializer):

    class Meta:
        model = Recipe
        fields = (
            'id', 'name', 'ingredients', 'picture',
            'difficulty', 'prep_time', 'prep_guide'
        )
```

ç¬¬å››æ­¥ï¼Œå®ç°è§†å›¾ã€‚è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨å¼€æŒ‚æ¨¡å¼ï¼Œç›´æ¥è°ƒç”¨ Django Rest Framework æä¾›çš„æ¨¡å‹è§†å›¾é›†ï¼ˆ`ModelViewset`ï¼‰ç›´æ¥æå®šæ•°æ®æ¨¡å‹çš„å¢åˆ æ”¹æŸ¥é€»è¾‘ï¼š

```py api/core/views.py
[tuture-del]from django.shortcuts import render
[tuture-add]from rest_framework import viewsets
[tuture-add]from .serializers import RecipeSerializer
[tuture-add]from .models import Recipe

[tuture-del]# Create your views here.
[tuture-add]
[tuture-add]class RecipeViewSet(viewsets.ModelViewSet):
[tuture-add]    serializer_class = RecipeSerializer
[tuture-add]    queryset = Recipe.objects.all()
```

åªéœ€æŒ‡å®š `serializer_class`ï¼ˆåºåˆ—å™¨ç±»ï¼‰å’Œ `queryset`ï¼ˆæ¨¡å‹æŸ¥è¯¢é›†ï¼‰ï¼Œå°±è‡ªåŠ¨å®šä¹‰å¥½äº†æ¨¡å‹çš„æ·»åŠ ã€åˆ é™¤ã€æŸ¥è¯¢å’Œä¿®æ”¹ï¼è™½ç„¶è§†å›¾é›†éå¸¸å¼ºå¤§ï¼Œä½†æ˜¯å¦‚æœè¦å®ç°æ›´åŠ çµæ´»çš„ä¸šåŠ¡é€»è¾‘ï¼Œé‚£ä¹ˆè¿˜æ˜¯è¦ä¸ºæ¯ä¸ªæ¥å£å®šä¹‰å•ç‹¬çš„è§†å›¾ç±»æ‰è¡Œã€‚

ç¬¬äº”æ­¥ï¼Œå®ç°è·¯ç”±ã€‚ç”±äºæˆ‘ä»¬ä¸Šä¸€æ­¥ä½¿ç”¨äº†è§†å›¾é›†ï¼Œå› æ­¤åªéœ€å…ˆè°ƒç”¨ `DefaultRouter` è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„è·¯ç”±ï¼Œç„¶ååŠ å…¥è®°å½•è·¯ç”±æ˜ å°„çš„åˆ—è¡¨ `urlpatterns` ä¸­ï¼š

```py api/core/urls.py
from django.urls import path, include
from rest_framework.routers import DefaultRouter
from .views import RecipeViewSet

router = DefaultRouter()
router.register(r'recipes', RecipeViewSet)

urlpatterns = [
    path('', include(router.urls)),
]
```

`router` ä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä»¥ä¸‹è·¯ç”±ï¼š

- `/recipes/`ï¼šåˆ›å»ºé£Ÿè°±ï¼ˆPOST æ–¹æ³•ï¼‰æˆ–è¯»å–é£Ÿè°±åˆ—è¡¨ï¼ˆGET æ–¹æ³•ï¼‰ï¼›
- `{% raw %}/recipes/{id}{% endraw %}`ï¼šè·å–å•ä¸ªé£Ÿè°±ï¼ˆGETï¼‰ã€æ›´æ–°å•ä¸ªé£Ÿè°±ï¼ˆPUTï¼‰æˆ–åˆ é™¤é£Ÿè°±ï¼ˆDELETEï¼‰ã€‚

{% note warning %}
**æ³¨æ„**

åœ¨ Django è·¯ç”±å®šä¹‰ä¸­ä¸åŒ…æ‹¬ HTTP æ–¹æ³•ï¼Œå…·ä½“çš„ HTTP æ–¹æ³•å¯ä»¥åœ¨è§†å›¾ä¸­è¯»å–å¹¶åˆ¤æ–­ã€‚
{% endnote %}

æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬å°† `core` å­åº”ç”¨ä¸­çš„è·¯ç”±æ¥å…¥å…¨å±€è·¯ç”±ï¼š

```py api/api/urls.py
// ...
    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))
"""
from django.contrib import admin
[tuture-del]from django.urls import path
[tuture-add]from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
[tuture-add]    path('api/', include('core.urls')),
]
```

æ²¡é”™ï¼Œå…³äºé£Ÿè°±çš„å¢åˆ æ”¹æŸ¥çš„ API æˆ‘ä»¬å…¨éƒ½å®ç°äº†ï¼ä¸ä¿¡ï¼Ÿå…ˆè¿è¡Œå¼€å‘æœåŠ¡å™¨ï¼š

```bash
(recipes_app-nV3wuGJ1) $ python manage.py runserver
```

ç”±äº Django REST Framework ä¸ºæˆ‘ä»¬æä¾›äº†æµ‹è¯• API çš„ Web ç•Œé¢ï¼Œå› æ­¤è¿™é‡Œå°±ä¸ç”¨ Postman ç­‰å·¥å…·è¿›è¡Œæµ‹è¯•äº†ã€‚ç”¨æµè§ˆå™¨è®¿é—® [localhost:8000/api/recipes](localhost:8000/api/recipes)ï¼Œå°±è¿›å…¥äº†å¦‚ä¸‹æ‰€ç¤ºçš„ API æµ‹è¯•é¡µé¢ï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/image.png)

è¿™ä¸ªé¡µé¢çš„ä¸‹æ–¹è¿˜æœ‰æ·»åŠ æ•°æ®ï¼ˆå‘èµ· POST è¯·æ±‚ï¼‰çš„è¡¨å•ï¼Œæˆ‘ä»¬å¡«ä¸€äº›æ•°æ®ï¼Œç„¶åç‚¹å‡» POST æŒ‰é’®ï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/image-f3d22507493bf44a.png)

ç„¶åå†æ¬¡è®¿é—®é£Ÿè°±åˆ—è¡¨é¡µé¢ï¼Œå°±æœ‰æˆ‘ä»¬åˆšåˆšæ·»åŠ çš„é£Ÿè°±äº†ï¼æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥å°è¯•è®¿é—®å•ä¸ªé£Ÿè°±çš„è¯¦æƒ…é¡µé¢ï¼ˆä¾‹å¦‚ [localhost:8000/api/recipes/1](localhost:8000/api/recipes/1)ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ Web é¡µé¢ç›´æ¥ä¿®æ”¹æˆ–åˆ é™¤å“¦ï¼

## ç”¨ Nuxt.js å®ç°ç½‘ç«™é¦–é¡µ

Django çš„ MTV æ¶æ„å›ºç„¶ä¼˜ç§€ï¼Œä½†æ˜¯éšç€ç°åœ¨çš„ä¸šåŠ¡é€»è¾‘è¶Šæ¥è¶Šå¤šåœ°å‘å‰ç«¯å€¾æ–œï¼ˆä¹Ÿå°±æ˜¯ç°åœ¨æµè¡Œçš„**å¯Œå‰ç«¯åº”ç”¨**ï¼‰ï¼Œå…¶ä¸­çš„ Tï¼ˆTemplateï¼‰éœ€è¦æ›´å¼ºå¤§çš„æ­¦å™¨æ¥è§£å†³ï¼Œè¿™é‡Œå°±æ˜¯æˆ‘ä»¬çš„ç¬¬äºŒä½ä¸»è§’ Nuxtã€‚

### ç”¨è„šæ‰‹æ¶åˆå§‹åŒ– Nuxt é¡¹ç›®

æˆ‘ä»¬å°†æŠŠæ‰€æœ‰çš„å‰ç«¯ä»£ç æ”¾åˆ° client ç›®å½•ä¸­ï¼Œä¸è¿‡æ— éœ€è‡ªå·±åˆ›å»ºï¼Œæˆ‘ä»¬è°ƒç”¨ nuxt çš„è„šæ‰‹æ¶æ¥åˆ›å»ºå‰ç«¯åº”ç”¨ï¼š

```bash
$ npx create-nuxt-app client
```

ä¹‹åè„šæ‰‹æ¶åº”ç”¨ä¼šè¯¢é—®ä¸€ç³»åˆ—é—®é¢˜ï¼ŒæŒ‰ä¸‹é¢çš„æˆªå›¾è¿›è¡Œé€‰æ‹©ï¼ˆå½“ç„¶ä½œè€…åå¡«è‡ªå·±ï¼‰ï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/create-nuxt-app.jpg)

æˆ‘ä»¬å¯¹ Nuxt è„šæ‰‹æ¶ç”Ÿæˆçš„ç›®å½•ç»“æ„ç¨ä½œè®²è§£ã€‚å¯ä»¥çœ‹åˆ° client ç›®å½•ä¸‹æœ‰ä»¥ä¸‹å­ç›®å½•ï¼š

- assetsï¼šå­˜æ”¾å›¾ç‰‡ã€CSSã€JS ç­‰åŸå§‹èµ„æºæ–‡ä»¶
- componentsï¼šå­˜æ”¾ Vue ç»„ä»¶
- layoutsï¼šå­˜æ”¾åº”ç”¨å¸ƒå±€æ–‡ä»¶ï¼Œå¸ƒå±€å¯åœ¨å¤šä¸ªé¡µé¢ä¸­ä½¿ç”¨
- middlewareï¼šå­˜æ”¾åº”ç”¨çš„ä¸­é—´ä»¶ã€‚Nuxt ä¸­çš„ä¸­é—´ä»¶æŒ‡é¡µé¢æ¸²æŸ“å‰æ‰§è¡Œçš„è‡ªå®šä¹‰å‡½æ•°ï¼ˆæœ¬æ•™ç¨‹ä¸­ä¸éœ€è¦ï¼‰
- pagesï¼šåº”ç”¨çš„è§†å›¾å’Œè·¯ç”±ã€‚Nuxt ä¼šæ ¹æ®æ­¤ç›®å½•ä¸­çš„ `.vue` æ–‡ä»¶è‡ªåŠ¨åˆ›å»ºåº”ç”¨çš„è·¯ç”±
- plugins: å­˜æ”¾ JavaScript æ’ä»¶ï¼Œç”¨äºåœ¨åº”ç”¨å¯åŠ¨å‰åŠ è½½ï¼ˆæœ¬æ•™ç¨‹ä¸­ä¸éœ€è¦ï¼‰
- staticï¼šå­˜æ”¾é€šå¸¸ä¸ä¼šæ”¹å˜çš„é™æ€æ–‡ä»¶ï¼Œå¹¶ä¸”å°†ç›´æ¥æ˜ å°„åˆ°è·¯ç”±ï¼ˆå³å¯é€šè¿‡ `/static/picture.png` è®¿é—®ï¼‰
- storeï¼šå­˜æ”¾ Vuex Store æ–‡ä»¶ï¼ˆæœ¬æ•™ç¨‹ä¸­ä¸éœ€è¦ï¼‰

æœ¬é¡¹ç›®æ‰€ç”¨åˆ°çš„å›¾ç‰‡èµ„æºè¯·è®¿é—®æˆ‘çš„ [GitHub ä»“åº“](https://github.com/mRcfps/recipes_app/tree/master/client/static/images)ï¼Œå¹¶ä¸‹è½½åˆ°å¯¹åº”çš„ç›®å½•ä¸­ã€‚

### ç¼–å†™å‰ç«¯é¦–é¡µ

æˆ‘ä»¬åœ¨ client/pages ä¸­åˆ›å»º index.vue æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­å®ç°æˆ‘ä»¬çš„å‰ç«¯é¦–é¡µï¼š

```html client/pages/index.vue
<template>
  <header>
    <div class="text-box">
      <h1>åƒè´§å¤©å ‚ ğŸ˜‹</h1>
      <p class="mt-3">åˆ¶ä½œæˆ‘ä»¬å–œçˆ±çš„ç¾é£Ÿ â¤ï¸ ï¸</p>
      <nuxt-link class="btn btn-outline btn-large btn-info" to="/recipes">
        æŸ¥çœ‹é£Ÿè°±
        <span class="ml-2">&rarr;</span>
      </nuxt-link>
    </div>
  </header>
</template>

<script>
  export default {
    head() {
      return {
        title: 'é¦–é¡µ',
      };
    },
  };
</script>

<style>
  header {
    min-height: 100vh;
    background-image: linear-gradient(
        to right,
        rgba(0, 0, 0, 0.9),
        rgba(12, 5, 5, 0.4)
      ), url('/images/banner.jpg');
    background-position: center;
    background-size: cover;
    position: relative;
  }
  .text-box {
    position: absolute;
    top: 50%;
    left: 10%;
    transform: translateY(-50%);
    color: #fff;
  }
  .text-box h1 {
    font-family: cursive;
    font-size: 5rem;
  }
  .text-box p {
    font-size: 2rem;
    font-weight: lighter;
  }
</style>
```

æ¨¡æ¿ï¼ˆTemplateï¼‰+ è„šæœ¬ï¼ˆScriptï¼‰+ æ ·å¼ï¼ˆStyleï¼‰ï¼Œç»å…¸çš„ Vue.js ç»„ä»¶ã€‚

æˆ‘ä»¬åˆšåˆšåˆ›å»ºäº† pages ç›®å½•ä¸‹çš„ index.vue æ–‡ä»¶ï¼Œè¿™æ„å‘³ç€å½“è®¿é—®æ ¹è·¯ç”± `/` æ—¶ï¼Œè¿™ä¸ªæ–‡ä»¶å°†è¢«è®¿é—®åˆ°ã€‚é€šè¿‡ `npm run dev`è¿è¡Œæˆ‘ä»¬çš„å‰ç«¯é¡µé¢ï¼ˆ**_è®°å¾—åœ¨ client å­ç›®å½•ä¸‹è¿è¡Œï¼_**ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/index-page.jpg)

çœŸæ˜¯è®©äººé£Ÿæ¬²å¤§å¼€ï¼

## æ•°æ®å±•ç¤ºï¼šå®ç°é£Ÿè°±åˆ—è¡¨

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¼”ç¤ºå¦‚ä½•å±•ç¤ºæ•°æ®ï¼Œå¹¶å®ç°é£Ÿè°±åˆ—è¡¨é¡µé¢ã€‚

### å®ç° RecipeCard ç»„ä»¶

é¦–å…ˆï¼Œå®ç°å°†ä¼šåœ¨å¤šä¸ªé¡µé¢ä¸­åå¤ä½¿ç”¨çš„é£Ÿè°±å¡ç‰‡ç»„ä»¶ `RecipeCard` å¦‚ä¸‹ï¼š

```html client/components/RecipeCard.vue
<template>
  <div class="card recipe-card">
    <img :src="recipe.picture" class="card-img-top" />
    <div class="card-body">
      <h5 class="card-title">{{ recipe.name }}</h5>
      <p class="card-text">
        <strong>æˆåˆ†:</strong>
        {{ recipe.ingredients }}
      </p>
      <div class="action-buttons">
        <nuxt-link :to="`/recipes/${recipe.id}/`" class="btn btn-sm btn-success"
          >æŸ¥çœ‹</nuxt-link
        >
        <nuxt-link
          :to="`/recipes/${recipe.id}/edit/`"
          class="btn btn-sm btn-primary"
          >ç¼–è¾‘</nuxt-link
        >
        <button @click="onDelete(recipe.id)" class="btn btn-sm btn-danger">
          åˆ é™¤
        </button>
      </div>
    </div>
  </div>
</template>

<script>
  export default {
    props: ['recipe', 'onDelete'],
  };
</script>

<style>
  .card-img-top {
    height: 12rem;
    width: 100%;
  }

  .recipe-card {
    border: none;
    box-shadow: 0 1rem 1.5rem rgba(0, 0, 0, 0.6);
  }
</style>
```

åœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ª `props`ï¼Œåˆ†åˆ«æ˜¯ `recipe`ï¼ˆä»£è¡¨é£Ÿè°±å¯¹è±¡ï¼‰å’Œ `onDelete`ï¼ˆåˆ é™¤æ—¶çš„å›è°ƒå‡½æ•°ï¼‰ï¼Œå¹¶åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™ä¸¤ä¸ªæˆå‘˜ã€‚

### äº†è§£ Nuxt çš„è·¯ç”±åŠŸèƒ½

åœ¨å®ç°ç¬¬äºŒä¸ªé¡µé¢ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆäº†è§£ä¸€ä¸‹ Nuxt çš„è·¯ç”±åŠŸèƒ½â€”â€”é€šè¿‡ pages ç›®å½•ä¸‹çš„æ–‡æ¡£ç»“æ„ï¼Œå°±å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ vue-router çš„è·¯ç”±å™¨é…ç½®ï¼

ä¾‹å¦‚æˆ‘ä»¬è¿™æ ·å®‰æ’ pages ä¸‹é¢çš„ç›®å½•ç»“æ„ ğŸ‘‡ï¼š

```text
pages
â”œâ”€â”€ README.md
â”œâ”€â”€ index.vue
â””â”€â”€ recipes
    â”œâ”€â”€ _id
    â”‚   â”œâ”€â”€ edit.vue
    â”‚   â””â”€â”€ index.vue
    â”œâ”€â”€ add.vue
    â””â”€â”€ index.vue
```

`_id` ç›®å½•ï¼ˆæˆ–è€…å…¶ä»–ä»¥å•ä¸‹åˆ’çº¿å¼€å¤´çš„ç›®å½•æˆ– .vue æ–‡ä»¶ï¼‰è¢«ç§°ä½œæ˜¯**åŠ¨æ€è·¯ç”±**ï¼ˆDynamic Routingï¼‰ï¼Œå¯ä»¥æ¥å—å‚æ•°ä½œä¸º URL çš„ä¸€éƒ¨åˆ†ã€‚ä¸Šé¢çš„ pages ç›®å½•è‡ªåŠ¨ç”Ÿæˆä¸‹é¢çš„ `router`ï¼š

```js
router: {
  routes: [
    {
      name: 'index',
      path: '/',
      component: 'pages/index.vue',
    },
    {
      name: 'recipes',
      path: '/recipes',
      component: 'pages/recipes/index.vue',
    },
    {
      name: 'recipes-add',
      path: '/recipes/add',
      component: 'pages/recipes/add.vue',
    },
    {
      name: 'recipes-id',
      path: '/recipes/:id?',
      component: 'pages/recipes/_id/index.vue',
    },
    {
      name: 'recipes-id-edit',
      path: '/recipes/:id?/edit',
      component: 'pages/recipes/_id/edit.vue',
    },
  ];
}
```

{% note info %}
**æç¤º**

å¦‚æœæƒ³è¦æ›´æ·±å…¥åœ°äº†è§£ Nuxt çš„è·¯ç”±åŠŸèƒ½ï¼Œè¯·å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://nuxtjs.org/guide/routing)ã€‚
{% endnote %}

### å®ç°é£Ÿè°±åˆ—è¡¨é¡µé¢

åˆ›å»ºé£Ÿè°±åˆ—è¡¨é¡µé¢ pages/recipes/index.vueï¼ˆå…ˆä½¿ç”¨å‡æ•°æ®å¡«å……ï¼‰ï¼Œä»£ç å¦‚ä¸‹ï¼š

```html client/pages/recipes/index.vue
[tuture-add]<template>
  [tuture-add]
  <main class="container mt-5">
    [tuture-add]
    <div class="row">
      [tuture-add]
      <div class="col-12 text-right mb-4">
        [tuture-add]
        <div class="d-flex justify-content-between">
          [tuture-add]
          <h3>åƒè´§å¤©å ‚</h3>
          [tuture-add]
          <nuxt-link to="/recipes/add" class="btn btn-info">æ·»åŠ é£Ÿè°±</nuxt-link>
          [tuture-add]
        </div>
        [tuture-add]
      </div>
      [tuture-add]
      <template v-for="recipe in recipes">
        [tuture-add]
        <div :key="recipe.id" class="col-lg-3 col-md-4 col-sm-6 mb-4">
          [tuture-add]
          <recipe-card :onDelete="deleteRecipe" :recipe="recipe"></recipe-card>
          [tuture-add]
        </div>
        [tuture-add]
      </template>
      [tuture-add]
    </div>
    [tuture-add]
  </main>
  [tuture-add]</template
>
[tuture-add] [tuture-add]
<script>
  [tuture-add]import RecipeCard from "~/components/RecipeCard.vue";
  [tuture-add]
  [tuture-add]const sampleData = [
  [tuture-add]  {
  [tuture-add]    id: 1,
  [tuture-add]    name: "é€šå¿ƒç²‰",
  [tuture-add]    picture: "/images/food-1.jpeg",
  [tuture-add]    ingredients: "ç‰›è‚‰, çŒªè‚‰, ç¾Šè‚‰",
  [tuture-add]    difficulty: "easy",
  [tuture-add]    prep_time: 15,
  [tuture-add]    prep_guide:
  [tuture-add]      "Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis, porro. Dignissimos ducimus ratione totam fugit officiis blanditiis exercitationem, nisi vero architecto quibusdam impedit, earum "
  [tuture-add]  },
  [tuture-add]  {
  [tuture-add]    id: 2,
  [tuture-add]    name: "ç¾Šè‚‰ä¸²",
  [tuture-add]    picture: "/images/food-2.jpeg",
  [tuture-add]    ingredients: "ç‰›è‚‰, çŒªè‚‰, ç¾Šè‚‰",
  [tuture-add]    difficulty: "easy",
  [tuture-add]    prep_time: 15,
  [tuture-add]    prep_guide:
  [tuture-add]      "Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis, porro. Dignissimos ducimus ratione totam fugit officiis blanditiis exercitationem, nisi vero architecto quibusdam impedit, earum "
  [tuture-add]  },
  [tuture-add]  {
  [tuture-add]    id: 3,
  [tuture-add]    name: "ç‚’é¥­",
  [tuture-add]    picture: "/images/banner.jpg",
  [tuture-add]    ingredients: "ç‰›è‚‰, çŒªè‚‰, ç¾Šè‚‰",
  [tuture-add]    difficulty: "easy",
  [tuture-add]    prep_time: 15,
  [tuture-add]    prep_guide:
  [tuture-add]      "Lorem ipsum dolor sit amet consectetur adipisicing elit. Omnis, porro. Dignissimos ducimus ratione totam fugit officiis blanditiis exercitationem, nisi vero architecto quibusdam impedit, earum "
  [tuture-add]  }
  [tuture-add]];
  [tuture-add]
  [tuture-add]export default {
  [tuture-add]  head() {
  [tuture-add]    return {
  [tuture-add]      title: "é£Ÿè°±åˆ—è¡¨"
  [tuture-add]    };
  [tuture-add]  },
  [tuture-add]  components: {
  [tuture-add]    RecipeCard
  [tuture-add]  },
  [tuture-add]  asyncData(context) {
  [tuture-add]    let data = sampleData;
  [tuture-add]    return {
  [tuture-add]      recipes: data
  [tuture-add]    };
  [tuture-add]  },
  [tuture-add]  data() {
  [tuture-add]    return {
  [tuture-add]      recipes: []
  [tuture-add]    };
  [tuture-add]  },
  [tuture-add]  methods: {
  [tuture-add]    deleteRecipe(recipe_id) {
  [tuture-add]      console.log(deleted`${recipe.id}`);
  [tuture-add]    }
  [tuture-add]  }
  [tuture-add]};
  [tuture-add]
</script>
[tuture-add] [tuture-add]<style scoped>
  [tuture-add]
</style>
```

æ‰“å¼€å‰ç«¯ç½‘ç«™ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšæ‰å®ç°çš„é£Ÿè°±åˆ—è¡¨é¡µé¢ï¼š

![](https://static.powerformer.com/c/b9b4d831629e9a7df36131b1661569eb/recipe-list-fake.jpg)

åˆ°è¿™å„¿ï¼Œæˆ‘ä»¬åˆ†åˆ«å®ç°äº†è¿™ä¸ªå…¨æ ˆé£Ÿè°±ç½‘ç«™çš„å‰ç«¯å’Œåç«¯åº”ç”¨ï¼Œè¿™ç¯‡æ•™ç¨‹çš„ç¬¬ä¸€éƒ¨åˆ†ä¹Ÿå°±ç»“æŸäº†ã€‚åœ¨æ¥ä¸‹æ¥çš„æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°å‰åç«¯ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶è¿›ä¸€æ­¥å®ç°é£Ÿè°±çš„è¯¦æƒ…åŠæ·»åŠ é¡µé¢ï¼Œä¸è§ä¸æ•£ï¼
