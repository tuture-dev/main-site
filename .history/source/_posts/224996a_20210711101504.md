---
title: "ä¸€æ¯èŒ¶çš„æ—¶é—´ï¼Œä¸Šæ‰‹ Taro äº¬ä¸œå°ç¨‹åºå¼€å‘"
description: "å°ç¨‹åºä¸–ç•Œçº·äº‰ä¸æ–­ï¼Œå·¨å‹ App éƒ½åœ¨çº·çº·æ„å»ºè‡ªå·±çš„å°ç¨‹åºæµé‡å…¥å£ï¼Œå¸Œæœ›åœ¨é€ ç¦å•†å®¶ã€ç”¨æˆ·çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å·©å›ºè‡ªå®¶æµé‡å£å’ï¼Œæˆ‘ä»¬å·²ç»ç†ŸçŸ¥äº†å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºï¼Œæˆ‘ä»¬å¯èƒ½è¿˜çŸ¥é“å·²ç»æœ‰äº†å¤´æ¡å°ç¨‹åºï¼ŒQQ è½»åº”ç”¨ç­‰ï¼Œä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥çš„æ˜¯ä¸€æ¬¾æ–°å‹å°ç¨‹åºï¼Œæ˜¯ç”±ç”µå•†å·¨å¤´äº¬ä¸œå³å°†å‘å¸ƒçš„ä¸€æ¬¾å°ç¨‹åºï¼Œç”µå•†å·¨å¤´çš„å°ç¨‹åºåˆä¼šä¸ºä¸­å›½äº’è”ç½‘å¸¦æ¥æ€ä¹ˆæ ·çš„æ”¹å˜äº†ï¼Ÿè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…å§ï¼è€Œæˆ‘ä»¬ä»Šå¤©å°†å¸¦å¤§å®¶ä½¿ç”¨ Taro æ¥ç¼–å†™äº¬ä¸œå°ç¨‹åºï¼Œå¹¶å®Œæˆå¯ä»¥å‘æ–‡ç« çš„çš„å¤šé¡µé¢åšå®¢å°ç¨‹åºã€‚"
tags: ["Taro", "å°ç¨‹åº", "äº¬ä¸œå°ç¨‹åº"]
date: 2020-04-20T04:35:59.837Z
photos:
  - https://static.tuture.co/c/224996a/jd-cover.jpg
---

## åˆå§‹åŒ–é¡¹ç›®ä»£ç 

æˆ‘ä»¬å°†ä½¿ç”¨åŒå±äºäº¬ä¸œå‡¹å‡¸å®éªŒå®¤å›¢é˜Ÿç ”å‘å¼€æºçš„å¤šç«¯ç»Ÿä¸€å¼€å‘è§£å†³æ–¹æ¡ˆ -- [Taro](https://taro.jd.com/) æ¥å¼€å‘æˆ‘ä»¬çš„äº¬ä¸œå°ç¨‹åºã€‚é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€çœ‹æœ€åçš„å®Œæˆæ•ˆæœï¼š

![](https://imgkr.cn-bj.ufileos.com/beeb95bd-7bd1-4ed4-877a-d052d676d7b8.gif)

### å‡†å¤‡ç¯å¢ƒ

#### æ‰‹åŠ¨åˆå§‹åŒ–é¡¹ç›®

ç¡®ä¿ä½ å®‰è£…äº† Node å¼€å‘ç¯å¢ƒï¼Œæ²¡æœ‰è¯·å‚è€ƒå›¾é›€ç¤¾åŒºå¦å¤–ä¸€ç¯‡ [Node.js æ–‡ç« ](https://tuture.co/2019/12/03/892fa12/)ï¼Œé‡Œé¢æœ‰å®Œå–„çš„ Node.js ç¯å¢ƒé…ç½®ã€‚

å®‰è£…äº†æœ€æ–°çš„ Node.js ç¯å¢ƒä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨ Node å®‰è£…æ—¶è‡ªå¸¦çš„åŒ…ç®¡ç†å·¥å…· Npm æ¥åˆ›å»ºä¸€ä¸ª Taro é¡¹ç›®ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```bash
$ npx @tarojs/cli init jd-mp
```

è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°ç»ˆç«¯æœ‰å¦‚ä¸‹è¾“å‡ºï¼š

![](https://static.tuture.co/c/224996a/1587388568343-2e73ab28-2722-4942-9c96-e19657d0e248.png)

ç¨ç­‰ä¸€ä¼šï¼Œå½“ç»ˆç«¯å‡ºç°å¦‚ä¸‹å­—æ ·æ—¶ï¼Œå°±ä»£è¡¨é¡¹ç›®åˆå§‹åŒ–æˆåŠŸå•¦ï¼

```bash
yarn install v1.21.1
info No lockfile found.
[1/4] Resolving packages...
[2/4] Fetching packages...
[3/4] Linking dependencies...
[4/4] Building fresh packages...
success Saved lockfile.
Done in 158.43s.

åˆ›å»ºé¡¹ç›® jd-mp æˆåŠŸï¼
è¯·è¿›å…¥é¡¹ç›®ç›®å½• jd-mp å¼€å§‹å·¥ä½œå§ï¼ğŸ˜
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ç”¨äº† 158.43s ï¼Œæ‰€ä»¥åˆå§‹é¡¹ç›®çš„è¿‡ç¨‹å¯èƒ½æœ‰ç‚¹é•¿ï¼Œè¯·è€å¿ƒç­‰å¾…ï¼Œå¦‚æœæœ€åä½ æ²¡æœ‰çœ‹åˆ°ç»ˆç«¯å‡ºç°å¦‚ä¸Šçš„å­—æ ·ï¼Œé‚£ä¹ˆä½ å¯èƒ½é‡åˆ°äº†é—®é¢˜ï¼Œå¯ä»¥è®¿é—® [Taro çš„è®ºå›](https://taro-club.jd.com/)å»å¯»æ±‚è§£ç­”ã€‚

{% note info %}
**æç¤º**

é€šè¿‡ä¸Šé¢çš„å‘½ä»¤åˆå§‹åŒ–é¡¹ç›®ä¹‹åï¼Œé»˜è®¤æ˜¯æ²¡æœ‰ç”Ÿæˆ `.gitignore` æ–‡ä»¶çš„ï¼Œè¿™ä¼šå¯¼è‡´ä½ çš„ç‰ˆæœ¬ç³»ç»Ÿä¸­å¤šäº†å¾ˆå¤š `node_modules/**` ä¸‹é¢çš„æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åœ¨åˆå§‹åŒ–å¥½çš„ `jd-mp` é¡¹ç›®æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª `.gitignore` æ–‡ä»¶ï¼Œå¹¶æ·»åŠ å¯¹åº”çš„è§„åˆ™å¦‚ä¸‹ï¼š

```text
node_modules # å¿½ç•¥ `node_modules` ä¸‹é¢çš„æ–‡ä»¶

dist # å¿½ç•¥ä¹‹åæ„å»ºé¡¹ç›®ç”Ÿæˆçš„ç›®å½•
```
{% endnote %}

#### ä½¿ç”¨å‡†å¤‡å¥½çš„ä»£ç 

å¦‚æœä½ å®‰è£…äº† Node ç¯å¢ƒï¼Œä½†æ˜¯ä¸æƒ³æˆ–è€…è‡ªå·±åˆå§‹åŒ–é¡¹ç›®æ˜¯é‡åˆ°äº†é—®é¢˜ï¼Œé‚£ä¹ˆä½ å¯ä»¥ Clone ä¸€ä¸‹æˆ‘ä»¬ä¸ºä½ å‡†å¤‡çš„åˆå§‹é¡¹ç›®ä»£ç ï¼Œä¹‹åè·Ÿç€æ•™ç¨‹å¯¹ç…§ç€è¿™ä»½åˆå§‹ä»£ç è¿›è¡Œæ”¹è¿›å°±å¯ä»¥å•¦ï¼

å¦‚æœä½ åçˆ± Githubï¼Œé‚£ä¹ˆå¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è·å–åˆå§‹ä»£ç ï¼š

```bash
$ git clone https://github.com/tuture-dev/jd-miniprogram.git
```

å¦‚æœä½ åçˆ± Giteeï¼Œé‚£ä¹ˆå¯ä»¥è¿è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è·å–åˆå§‹ä»£ç ï¼š

```bash
$ git clone https://gitee.com/tuture/jd-miniprogram.git
```

ä¸è‡ªå·±ä½¿ç”¨å‘½ä»¤åˆå§‹åŒ– Taro é¡¹ç›®ä¸åŒï¼Œé€šè¿‡ Clone æˆ‘ä»¬ä¸ºä½ å‡†å¤‡å¥½çš„ä»£ç ï¼Œä½ éœ€è¦æ‰‹åŠ¨å®‰è£…ä¾èµ–ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤å®‰è£…ä¾èµ–ï¼š

```bash
$ cd jd-miniprogram && npm install
```

å¥½çš„ï¼Œé€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å°±å‡†å¤‡å¥½äº†åˆå§‹ä»£ç ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦ä½ å®é™…åŠ¨æ‰‹å†™ä»£ç äº†ï¼Œæ˜¯ä¸æ˜¯æœ‰ç‚¹æœŸå¾…å‘¢ï¼Ÿæˆ‘ä»¬é©¬ä¸Šå°±å¯ä»¥å°è¯•å¼€å‘ä¸€ä¸ªäº¬ä¸œå°ç¨‹åºäº†ï¼

## é…ç½® JD å¼€å‘ç¯å¢ƒ

### å®‰è£… JD çš„è¿è¡Œè„šæœ¬

ç­‰ç­‰ï¼Œå› ä¸ºäº¬ä¸œå°ç¨‹åºæ‰åˆšåˆšå‡ºæ¥ï¼Œè¿˜æ²¡æœ‰æ­£å¼å¼€å§‹æ¨å¹¿ï¼Œæ‰€ä»¥ Taro åˆå§‹åŒ–é¡¹ç›®çš„è„šæœ¬é‡Œæ²¡æœ‰ç”Ÿæˆäº¬ä¸œå°ç¨‹åºçš„å¼€å¯ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹å¯¹åº”çš„å¼€å¯ä¾èµ–ï¼Œæ‰“å¼€å‘½ä»¤è¡Œï¼Œåœ¨ `jd-mp` é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£…ï¼š

```bash
$ npm install @tarojs/taro-jd
```

å®‰è£…å¥½ä¹‹åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ `package.json` ä¸­æ·»åŠ å¦‚ä¸‹ä¸¤æ¡å¼€å¯äº¬ä¸œå°ç¨‹åºé¡¹ç›®çš„è„šæœ¬ï¼š

```json package.json
{
  "name": "jd-mp",
  "version": "1.0.0",
  "private": true,
  "description": "ç¬¬ä¸€ä¸ªäº¬ä¸œå°ç¨‹åº",
  "templateInfo": {
    "name": "default",
    "typescript": false,
    "css": "sass"
  },
  "scripts": {
    // ...
    "build:quickapp": "taro build --type quickapp",
[tuture-add]    "build:jd": "taro build --type jd",
    // ...
[tuture-add]    "dev:quickapp": "npm run build:quickapp -- --watch",
[tuture-add]    "dev:jd": "npm run build:jd -- --watch"
  },
  "author": "",
  "license": "MIT",
  "dependencies": {
    // ...
[tuture-add]    "@tarojs/taro-jd": "^2.1.5",
    // ...
  },
  // ...
}
```

å®‰è£…å¹¶æ·»åŠ å¯¹åº”çš„å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç»ˆç«¯é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥è¿è¡Œæˆ‘ä»¬çš„äº¬ä¸œå°ç¨‹åºï¼š

```bash
$ npx taro build --type jd --watch
```

æ³¨æ„è¦åŠ ä¸Š `--watch` å‚æ•°ï¼Œè¿™æ ·å½“æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨ï¼ˆå¦‚ VSCodeï¼‰ä¿®æ”¹å†…å®¹å¹¶ä¿å­˜ä¹‹åï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨ç¼–è¯‘æ›´æ–°ï¼Œç„¶ååˆ·æ–°å¼€å‘è€…å·¥å…·å°±å¯ä»¥æŸ¥çœ‹ä¿®æ”¹åçš„æ•ˆæœï¼Œä¸Šé¢è¿™æ¡å‘½ä»¤ä¼šå®é™…è¿è¡Œæˆ‘ä»¬ `package.json` é‡Œé¢æ·»åŠ çš„è„šæœ¬å‘½ä»¤ï¼š

```bash
"dev:jd": "npm run build:jd -- --watch"
```

### æ³¨å†Œäº¬ä¸œå°ç¨‹åº

å½“è¿›è¡Œäº†ä¸Šé¢çš„é…ç½®ä¹‹åï¼Œå¹¶æŠŠé¡¹ç›®å¼€èµ·æ¥ä¹‹åï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å»æ³¨å†Œä¸€ä¸ªäº¬ä¸œå°ç¨‹åºï¼Œæ‹¿åˆ°å¯¹åº”çš„å°ç¨‹åºçš„ `AppId` ï¼Œä½ å¯ä»¥è®¿é—®[äº¬ä¸œå°ç¨‹åºå®˜ç½‘](https://mp.jd.com/?entrance=taro)ï¼Œæ ¹æ®æ­¥éª¤æ³¨å†Œå°ç¨‹åºï¼Œå¹¶åˆ›å»ºé¡¹ç›®ï¼Œç„¶åå–åˆ°é¡¹ç›®çš„ `AppId` ï¼Œç±»ä¼¼å¦‚ä¸‹ï¼š

![](https://static.tuture.co/c/224996a/1587388568471-3e51b0c5-5811-4493-a795-45878fc05c0a.png)

ç„¶åä¸‹è½½äº¬ä¸œå¼€å‘è€…å·¥å…·ï¼Œæ–°å»ºä¸€ä¸ªå°ç¨‹åºé¡¹ç›®ï¼Œå¹¶è¾“å…¥æ‹¿åˆ°çš„ `AppId` ï¼š

![](https://static.tuture.co/c/224996a/1587388568473-02fcc579-7f11-478f-bd52-c10a7ad29e26.png)

å¹¶åœ¨äº¬ä¸œå¼€å‘è€…é‡Œé¢ç‚¹å‡»ä¸Šé¢åœ†åœˆåœˆå‡ºçš„é‚£ä¸ªæ–‡ä»¶å¤¹å›¾æ ‡ï¼Œæ‰“å¼€ä¸Šé¢åˆ›å»ºçš„ `jd-mp` é¡¹ç›®ï¼Œä¸è¿‡è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦é€‰ä¸­é¡¹ç›®é‡Œé¢ç¼–è¯‘å¥½çš„ `dist` ç›®å½•ï¼š

![](https://static.tuture.co/c/224996a/1587388568417-8a8754a0-3e21-4f63-87ea-2c90c9e9d0fc.png)

è¿™ä¸ªæ—¶å€™ï¼Œä½ çš„é¡¹ç›®è¿è¡Œç€ï¼Œæ‰“å¼€ä¹‹åï¼Œä½ ä¼šåœ¨äº¬ä¸œå°ç¨‹åºå¼€å‘è€…å·¥å…·é‡Œé¢çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š

![](https://static.tuture.co/c/224996a/1587388568427-f86cecdc-263b-4fe7-bfe1-b542d5164687.png)

å½“ç„¶ä¸Šé¢è¿™ä¸ªæŒ‡ç¤ºçš„æ•ˆæœæ˜¯æˆ‘æœ€ç»ˆå†™å¥½çš„é¡¹ç›®ï¼Œä½ åˆæ¬¡æ‰“å¼€åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸€ä¸ª `Hello World` ğŸ¥³ğŸ¥³ğŸ¥³

## ç¼–å†™ç¬¬ä¸€ä¸ª JD ç»„ä»¶å¹¶é…ç½®æ ·å¼

ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ç¼–å†™æˆ‘ä»¬çš„äº¬ä¸œå°ç¨‹åºäº†ï¼

### ç¼–å†™ç¬¬ä¸€ä¸ª JD ç»„ä»¶

Taro å°ç¨‹åº `2.x.x` æš‚æ—¶æ”¯æŒ React æ¥å†™å°ç¨‹åºï¼Œè€Œ Taro `3.x.x` å…è®¸ Reactï¼ŒVue å’Œ Nerve æ¥å†™ï¼Œä¹‹åæˆ‘ä»¬å›¾é›€ç¤¾åŒºä¼šå‡º Taro `3.x.x` çš„æ•™ç¨‹ï¼Œè®© Vue çš„è¯»è€…ä¹Ÿå¯ä»¥ä½¿ç”¨ Taro æ¥å†™å°ç¨‹åºã€‚

æ—¢ç„¶ç°åœ¨åªèƒ½ç”¨ Reactï¼Œé‚£ä¹ˆå°±è®©æˆ‘ä»¬æ–°æ½®ä¸€ç‚¹ï¼Œä½¿ç”¨ React Hooks æ¥ç®€åŒ–ç»„ä»¶ç¼–å†™ï¼Œæ‰“å¼€ `src/pages/index/index.jsx` ï¼Œå°†ç±»ç»„ä»¶é‡æ„æˆå‡½æ•°å¼ç»„ä»¶ï¼Œå¹¶æ·»åŠ ä¸€ç‚¹å‘å¸–ç›¸å…³çš„å†…å®¹ï¼š

```jsx src/pages/index/index.jsx
[tuture-del]import Taro, { Component } from '@tarojs/taro'
[tuture-del]import { View, Text } from '@tarojs/components'
[tuture-del]import './index.scss'
[tuture-del] 
[tuture-del]export default class Index extends Component {
[tuture-del] 
[tuture-del]  componentWillMount () { }
[tuture-del] 
[tuture-del]  componentDidMount () { }
[tuture-del] 
[tuture-del]  componentWillUnmount () { }
[tuture-del] 
[tuture-del]  componentDidShow () { }
[tuture-del] 
[tuture-del]  componentDidHide () { }
[tuture-del] 
[tuture-del]  config = {
[tuture-del]    navigationBarTitleText: 'é¦–é¡µ'
[tuture-del]  }
[tuture-del] 
[tuture-del]  render () {
[tuture-del]    return (
[tuture-del]      <View className='index'>
[tuture-del]        <Text>Hello world!</Text>
[tuture-del]      </View>
[tuture-del]    )
[tuture-del]  }
[tuture-add]import Taro from "@tarojs/taro";
[tuture-add]import { View, Button, Textarea } from "@tarojs/components";
[tuture-add]import "./index.scss";
[tuture-add] 
[tuture-add]export default function Index() {
[tuture-add]  return (
[tuture-add]    <View className="index">
[tuture-add]      <Textarea
[tuture-add]        placeholder="æ’°å†™ä¼˜è´¨æ•™ç¨‹..."
[tuture-add]        className="post-input"
[tuture-add]        autoHeight
[tuture-add]      />
[tuture-add]      <Button className="post-button">å‘è¡¨</Button>
[tuture-add]    </View>
[tuture-add]  );
}
[tuture-add] 
[tuture-add]Index.config = {
[tuture-add]  navigationBarTitleText: "é¦–é¡µ"
[tuture-add]};
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å°†ç±»ç»„ä»¶æ”¹æˆäº†å‡½æ•°å¼ç»„ä»¶ï¼Œå¹¶ä» `@tarojs/components` é‡Œé¢å¯¼å…¥å¹¶æ·»åŠ äº†ä¸¤ä¸ªç»„ä»¶ `Textarea` å’Œ `Button` ï¼Œç”¨äºå¸–å­è¡¨å•çš„å†…å®¹è¾“å…¥å’Œå‘è¡¨ã€‚

æ¥ç€ï¼Œæˆ‘ä»¬å°†ä¹‹å‰çš„ç±»å±æ€§ `config` ç§»åŠ¨åˆ° `Index.config` ä¸Šé¢æ¥å®šä¹‰ï¼Œè¿™ä¸ª `config` åªåœ¨é¡µé¢çº§ç»„ä»¶é‡Œé¢å­˜åœ¨ï¼Œç”¨äºå®šä¹‰é¡µé¢çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚è¿™ä¸ªçš„  `navigationBarTitleText` å°±æ˜¯æ­¤é¡µé¢çš„æ ‡é¢˜ï¼Œåœ¨å°ç¨‹åºé‡Œé¢ä»£è¡¨é¡¶éƒ¨çš„æ ‡é¢˜ï¼š

![](https://static.tuture.co/c/224996a/1587388568324-7fed3fa6-b95c-4c54-8489-46a6171feed1.png)

### ä¸ºç»„ä»¶æ·»åŠ æ ·å¼

å½“æˆ‘ä»¬æ·»åŠ äº†ä¸Šé¢ä¸¤ä¸ªç»„ä»¶ä¹‹åï¼Œç»„ä»¶çš„åŸç”Ÿæ ·å¼å¼€èµ·æ¥æ¯”è¾ƒæ™®é€šï¼Œä¸ºäº†è®©æˆ‘ä»¬çš„å°ç¨‹åºæ›´åŠ ä¸“ä¸šä¸€ç‚¹ï¼Œæˆ‘ä»¬ç»™å…¶åŠ ç‚¹æ ·å¼ï¼Œå…¶å®ä½¿ç”¨ Taro å¼€å‘äº¬ä¸œå°ç¨‹åºæ—¶ï¼Œå†™æ ·å¼å’Œæˆ‘ä»¬å¹³æ—¶å¼€å‘ Web åº”ç”¨å·®ä¸å¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† SCSS æ¥å†™æ ·å¼ï¼Œåœ¨ç»„ä»¶é‡Œé¢å®šä¹‰äº†å¯¹åº”çš„ç±»åå¹¶å¯¼å…¥äº† CSS æ–‡ä»¶ï¼Œä¹‹åå† CSS æ–‡ä»¶é‡Œé¢å†™æ ·å¼ã€‚

æ‰“å¼€ `src/pages/index/index.scss` ï¼Œåœ¨å…¶ä¸­æ·»åŠ å¯¹åº”çš„æ ·å¼æ–‡ä»¶å¦‚ä¸‹ï¼š

```scss src/pages/index/index.scss
[tuture-add].index {
[tuture-add]  display: flex;
[tuture-add]  flex-direction: column;
[tuture-add]  align-items: center;
[tuture-add]}
[tuture-add] 
[tuture-add].post-input {
[tuture-add]  margin-top: 24px;
[tuture-add]  background: #fff;
[tuture-add]  width: 80%;
[tuture-add]  min-height: 80px;
[tuture-add]  padding: 16px 30px;
[tuture-add]  border: 1px solid #eee;
[tuture-add]  font-size: 14px;
[tuture-add]}
[tuture-add] 
[tuture-add].post-button {
[tuture-add]  margin-top: 24px;
[tuture-add]  width: calc(80% + 60px);
[tuture-add]  border-radius: 0;
[tuture-add]  background-color: #00bc87;
[tuture-add]  color: white;
[tuture-add]}
```

å½“æ·»åŠ äº†æ ·å¼ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨å˜æˆäº†å¦‚ä¸‹æ ·å­ï¼š

![](https://static.tuture.co/c/224996a/1587388655569-cd751ab2-bf21-4342-b863-81c810d5fbb7.png)

æ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å˜å¾—æœ‰ç‚¹ä¸“ä¸šäº†å‘¢ï¼ŸğŸ¤“

## ä½¿ç”¨ React Hooks å¹¶å¤„ç†äº‹ä»¶

åœ¨ç¼–å†™äº†ç¬¬ä¸€ä¸ªç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°è¯•æ¥å¤„ç†æˆ‘ä»¬å¸–å­çš„å†…å®¹è¾“å…¥ï¼Œè¿™ä¸ªæ—¶å€™å°±æ¶‰åŠåˆ°äº‹ä»¶å¤„ç†äº†ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¹‹å‰åœ¨ `src/pages/index/index.jsx` é‡Œé¢å®šä¹‰çš„ `TextArea` åšæˆ â€œå—æ§ç»„ä»¶â€ï¼Œæˆ‘ä»¬ä½¿ç”¨ React Hooks æä¾›çš„ `useState` æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚

æ‰“å¼€  `src/pages/index/index.jsx `ï¼Œå¯¹å…¶ä¸­çš„å†…å®¹ä½œå‡ºå¯¹åº”çš„ä¿®æ”¹å¦‚ä¸‹ï¼š

```jsx src/pages/index/index.jsx
[tuture-del]import Taro from "@tarojs/taro";
[tuture-add]import Taro, { useState } from "@tarojs/taro";
import { View, Button, Textarea } from "@tarojs/components";
import "./index.scss";

export default function Index() {
[tuture-add]  const [post, setPost] = useState("");
[tuture-add] 
[tuture-add]  function handleChange(e) {
[tuture-add]    setPost(e.target.value);
[tuture-add]  }
[tuture-add] 
  return (
    <View className="index">
      <Textarea
        placeholder="æ’°å†™ä¼˜è´¨æ•™ç¨‹..."
        className="post-input"
[tuture-add]        value={post}
[tuture-add]        onInput={handleChange}
        autoHeight
      />
      <Button className="post-button">å‘è¡¨</Button>
    </View>
  );
}

Index.config = {
  navigationBarTitleText: "é¦–é¡µ"
};
```

å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æˆ‘ä»¬å¯¼å…¥äº† `useState` é’©å­ï¼Œç„¶åè°ƒç”¨ç”Ÿæˆäº†ä¸€ä¸ª `post` å’Œ `setPost` ï¼Œæ¥ç€æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª `handleChange` å‡½æ•°æ¥å¤„ç† `Textarea` çš„ `onInput` äº‹ä»¶ï¼Œæ¥æ”¶ç”¨æˆ·è¾“å…¥æ¥è®¾ç½® `post` å€¼ï¼Œå¹¶é€šè¿‡å°† `post` è®¾ç½®å› `Textarea` çš„ `value` æ¥è¾¾åˆ° â€œå—æ§ç»„ä»¶â€ çš„ç›®çš„ã€‚

## ç»„ä»¶ç»„åˆå’Œå¤„ç† UI åé¦ˆ

å½“æˆ‘ä»¬çš„å†…å®¹å¤šèµ·æ¥ä¹‹åï¼Œåœ¨ä¸€ä¸ªç»„ä»¶é‡Œé¢æ”¾å¤ªå¤šå†…å®¹ä¼šå¯¼è‡´é€»è¾‘ä¸æ¸…æ™°ï¼Œæ‰€ä»¥æˆ‘ä»¬å°è¯•æ–°å»ºç»„ä»¶æ¥æŠ½å‡ºå±äºå®ƒçš„ä¸€éƒ¨åˆ†é€»è¾‘ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬é©¬ä¸Šè¦å¤„ç†å¸–å­å‘è¡¨é€»è¾‘ï¼Œå¹¶ä¸”è¿˜è¦å±•ç¤ºå‘è¡¨ä¹‹åçš„æ•ˆæœï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–æ–°å»ºä¸€ä¸ªç»„ä»¶æ¥å±•ç¤ºå¸–å­é€»è¾‘ã€‚

### æ–°å»ºç»„ä»¶

åœ¨ `src` ç›®å½•å…ˆæ–°å»º `components` æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢æ–°å»º `PostCard` æ–‡ä»¶å¤¹ï¼Œæ¥ç€åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢å»ºä¸€ä¸ª `index.jsx` æ–‡ä»¶ï¼Œç”¨äºæ”¾ç½®ç»„ä»¶é€»è¾‘å’Œ UIï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç»„ä»¶é‡Œé¢ç¼–å†™å¦‚ä¸‹é€»è¾‘ï¼š

```jsx src/components/PostCard/index.jsx
import Taro from "@tarojs/taro";
import { View, Text, Image } from "@tarojs/components";

import "./styles.scss";

export default function PostCard(props) {
  const { post } = props;

  return (
    <View className="post">
      <Text className="post-name">{post}</Text>
    </View>
  );
}
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª `PostCard` å‡½æ•°å¼ç»„ä»¶ï¼Œç„¶åæ¸²æŸ“äº†å…¶çˆ¶ç»„ä»¶ä¼ ä¸‹æ¥çš„å‚æ•° `post` ï¼Œå¹¶ä¸”å¯¼å…¥äº†ä¸€ä¸ª `styles.scss` æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†é©¬ä¸Šæ¥åˆ›å»ºå®ƒã€‚

åœ¨ `src/components/PostCard` æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª `styles.scss` ï¼Œå¹¶ç¼–å†™å¦‚ä¸‹å†…å®¹ï¼š

```scss src/components/PostCard/styles.scss
.post {
  width: calc(80% + 60px);
  margin: 0 auto;
  padding: 32px 0;
  border-bottom: 1px solid #eee;
}

.post-name {
  font-size: 20px;
  font-weight: 600;
  width: 100%;
}
```

### å¤„ç† UI åé¦ˆ

å½“ç¼–å†™äº†æ¸²æŸ“å¸–å­çš„ç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬å›åˆ° `src/pages/index/index.jsx` ç»„ä»¶ï¼Œæ¥å¯¼å…¥æˆ‘ä»¬å†™å¥½çš„ `PostCard` ç»„ä»¶ï¼Œå¹¶åŒæ—¶å¤„ç†å¸–å­å‘è¡¨é€»è¾‘ï¼š

```jsx src/pages/index/index.jsx
import Taro, { useState } from "@tarojs/taro";
import { View, Button, Textarea } from "@tarojs/components";
[tuture-add] 
[tuture-add]import PostCard from "../../components/PostCard";
import "./index.scss";

export default function Index() {
  const [post, setPost] = useState("");
[tuture-add]  const [postList, setPostList] = useState([]);

  function handleChange(e) {
    setPost(e.target.value);
  }

[tuture-add]  function handleSubmit() {
[tuture-add]    console.log("hello world", post);
[tuture-add]    if (!post) {
[tuture-add]      Taro.showToast({
[tuture-add]        title: "å†…å®¹ä¸èƒ½ä¸ºç©º",
[tuture-add]        icon: "none"
[tuture-add]      });
[tuture-add]    } else {
[tuture-add]      Taro.showToast({
[tuture-add]        title: "å‘è¡¨æˆåŠŸ",
[tuture-add]        icon: "success"
[tuture-add]      });
[tuture-add] 
[tuture-add]      setPost("");
[tuture-add]      setPostList(postList.concat(post));
[tuture-add]    }
[tuture-add]  }
[tuture-add] 
  return (
    <View className="index">
      <Textarea
        placeholder="æ’°å†™ä¼˜è´¨æ•™ç¨‹..."
        className="post-input"
        value={post}
        onInput={handleChange}
        autoHeight
      />
[tuture-del]      <Button className="post-button">å‘è¡¨</Button>
[tuture-add]      <Button className="post-button" onClick={handleSubmit}>
[tuture-add]        å‘è¡¨
[tuture-add]      </Button>
[tuture-add]      <View className="post-box">
[tuture-add]        {postList.map(postItem => (
[tuture-add]          <PostCard post={postItem} />
[tuture-add]        ))}
[tuture-add]      </View>
    </View>
  );
}

Index.config = {
  navigationBarTitleText: "é¦–é¡µ"
};
```

å¯ä»¥çœ‹åˆ°ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨ `useState` é’©å­åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„çŠ¶æ€ `postList` ï¼Œæ¥ç€æˆ‘ä»¬åœ¨ `Button` ä¸Šå®šä¹‰äº†ä¸€ä¸ª `onClick` çš„å¤„ç†å‡½æ•° `handleSubmit` ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬åˆ¤æ–­è¾“å…¥çš„ `post` æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºæç¤ºç”¨æˆ·ä¸å¯ä»¥å‘å¸ƒï¼Œå¦‚æœæœ‰å†…å®¹ï¼Œåˆ™æç¤ºç”¨æˆ·æ–°å¸–å­å‘å¸ƒæˆåŠŸï¼Œå¹¶å°† `post` æ·»åŠ åˆ° `postList` ä¸­ï¼Œä»¥åŠç½®ç©º `post` å†…å®¹ï¼Œç­‰å¾…ä¸‹æ¬¡è¾“å…¥ã€‚

æ³¨æ„åˆ°è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ `Taro.showToast` API æ¥æç¤ºç”¨æˆ·ï¼ŒTaro è¿˜æœ‰å¾ˆå¤šæ–¹ä¾¿çš„ APIï¼Œæ¯”å¦‚å¼¹å‡ºæ¨¡æ€æ¡†ç­‰ï¼Œå¯ä»¥[å‚è€ƒæ–‡æ¡£](https://nervjs.github.io/taro/docs/apis/interface/interactives/showToast.html)ã€‚

{% note info %}
**æç¤º**

è¿™é‡Œé¢å¤–çš„ `console` è¯­å¥å¯ä»¥å¿½ç•¥ï¼Œå±äºå¼€å‘æ—¶çš„è°ƒè¯•è¯­å¥ã€‚
{% endnote %}

æœ€åï¼Œæˆ‘ä»¬åŠ ä¸€ç‚¹æ ·å¼æ¥è®©æˆ‘ä»¬çš„ç•Œé¢æ›´åŠ ä¸“ä¸šï¼Œæ‰“å¼€ `src/pages/index/index.scss` ï¼Œä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼š

```scss src/pages/index/index.scss
.index {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.post-input {
  margin-top: 24px;
  background: #fff;
  width: 80%;
  min-height: 80px;
  padding: 16px 30px;
  border: 1px solid #eee;
  font-size: 14px;
}

.post-button {
  margin-top: 24px;
  width: calc(80% + 60px);
  border-radius: 0;
  background-color: #00bc87;
  color: white;
}
[tuture-add] 
[tuture-add].post-box {
[tuture-add]  width: 100%;
[tuture-add]  margin-top: 24px;
[tuture-add]}
```

å¤§åŠŸå‘Šæˆï¼æˆ‘ä»¬ç°åœ¨å¯ä»¥å‘è¡¨å¸–å­å¹¶å±•ç¤ºæ•ˆæœäº†ï¼Œè¿™ä¸ªæ—¶å€™æµ‹è¯•ä½ çš„äº¬ä¸œå°ç¨‹åºï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š

![](https://static.tuture.co/c/224996a/1587388568403-58bca79a-745e-4b80-821b-8ca684372ea8.png)

æˆ‘ä»¬æˆåŠŸçš„å¤„ç†äº†ç»„ä»¶çš„ç»„åˆï¼Œå¹¶ä¸”åœ¨å‘è¡¨å¸–å­çš„æ—¶å€™ä½¿ç”¨ Taro çš„ API ç»™ä¸äº†ç”¨æˆ· UI åé¦ˆã€‚

## å¤šé¡µé¢ä¸è·¯ç”±è·³è½¬

é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œæˆ‘ä»¬å¯ä»¥å±•ç¤ºå¸–å­åˆ—è¡¨ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¸–å­çš„å†…å®¹å¯èƒ½å¾ˆé•¿ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–çš„é¡µé¢æ¥å±•ç¤ºå¸–å­è¯¦æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥ä¸‹æ¥å°†æ–°å»ºé¡µé¢å¹¶ä½¿ç”¨ Taro æä¾›çš„ API è¿›è¡Œå¤šé¡µé¢çš„è·³è½¬ã€‚

### æ–°å»ºé¡µé¢

æˆ‘ä»¬åœ¨ `src/pages` æ–‡ä»¶å¤¹ä¸‹å»ºä¸€ä¸ª `post` æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨é‡Œé¢å»ºä¸€ä¸ª `post.jsx` æ–‡ä»¶ï¼Œå¹¶ç¼–å†™å¯¹åº”çš„å†…å®¹å¦‚ä¸‹ï¼š

```jsx src/pages/post/post.jsx
import Taro, { useRouter } from "@tarojs/taro";
import { View, Text } from "@tarojs/components";

import "./post.scss";

export default function Post() {
  const { params } = useRouter();
  const { post = "" } = params;

  return (
    <View className="post">
      <Text className="post-name">{post}</Text>
    </View>
  );
}

Post.config = {
  navigationBarTitleText: "å¸–å­é¡µ"
};
```

å¯ä»¥çœ‹åˆ°ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª `Post` å‡½æ•°å¼ç»„ä»¶ï¼Œç„¶åå¢åŠ äº† `config` é…ç½®ï¼Œåœ¨æ ‡é¢˜æ”¹ä¸º â€œå¸–å­é¡µâ€ï¼Œæ¥ç€æˆ‘ä»¬ä½¿ç”¨ Taro æä¾›çš„ `useRouter` é’©å­æ¥è·å–è·¯ç”±ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼Œå–åˆ°å‚æ•°é‡Œé¢çš„ `post`  å¹¶æ¸²æŸ“ã€‚

{% note warning %}
**æ³¨æ„**

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡è·¯ç”±ä¼ é€’ `postId` ï¼Œç„¶ååœ¨å¸–å­è¯¦æƒ…é‡Œé¢å‘èµ· HTTP è¯·æ±‚è·å–å¸–å­è¯¦æƒ…ï¼Œè¿™é‡Œä¸ºäº†æ¼”ç¤ºäº¬ä¸œå°ç¨‹åºçš„èƒ½åŠ›ï¼Œæ‰€ä»¥ç®€åŒ–äº†å†™æ³•ã€‚
{% endnote %}

### æ³¨å†Œé¡µé¢

å½“åˆ›å»ºäº†æ–°é¡µé¢ä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦å‘Šè¯‰åº”ç”¨æˆ‘ä»¬åˆ›å»ºçš„è¿™ä¸ªé¡µé¢ï¼Œä¹Ÿå°±æ˜¯åœ¨åº”ç”¨æ³¨å†Œè¿™ä¸ªé¡µé¢ï¼Œæ‰“å¼€ `src/app.jsx` ï¼Œåœ¨å¯¹åº” `App` ç»„ä»¶çš„ `config.pages` å±æ€§é‡Œé¢æ·»åŠ åˆšåˆšåˆ›å»ºçš„å¸–å­è¯¦æƒ…é¡µçš„è·¯å¾„å¦‚ä¸‹ï¼š

```jsx src/app.jsx
[tuture-del]import Taro, { Component } from '@tarojs/taro'
[tuture-del]import Index from './pages/index'
[tuture-add]import Taro, { Component } from "@tarojs/taro";
[tuture-add]import Index from "./pages/index";

[tuture-del]import './app.scss'
[tuture-add]import "./app.scss";

// å¦‚æœéœ€è¦åœ¨ h5 ç¯å¢ƒä¸­å¼€å¯ React Devtools
// å–æ¶ˆä»¥ä¸‹æ³¨é‡Šï¼š
// if (process.env.NODE_ENV !== 'production' && process.env.TARO_ENV === 'h5')  {
//   require('nerv-devtools')
// }

class App extends Component {
[tuture-add]  componentDidMount() {}

[tuture-del]  componentDidMount () {}
[tuture-add]  componentDidShow() {}

[tuture-del]  componentDidShow () {}
[tuture-add]  componentDidHide() {}

[tuture-del]  componentDidHide () {}
[tuture-del] 
[tuture-del]  componentDidCatchError () {}
[tuture-add]  componentDidCatchError() {}

  config = {
[tuture-del]    pages: [
[tuture-del]      'pages/index/index'
[tuture-del]    ],
[tuture-add]    pages: ["pages/index/index", "pages/post/post"],
    window: {
[tuture-del]      backgroundTextStyle: 'light',
[tuture-del]      navigationBarBackgroundColor: '#fff',
[tuture-del]      navigationBarTitleText: 'WeChat',
[tuture-del]      navigationBarTextStyle: 'black'
[tuture-add]      backgroundTextStyle: "light",
[tuture-add]      navigationBarBackgroundColor: "#fff",
[tuture-add]      navigationBarTitleText: "WeChat",
[tuture-add]      navigationBarTextStyle: "black"
    }
[tuture-del]  }
[tuture-add]  };

  // åœ¨ App ç±»ä¸­çš„ render() å‡½æ•°æ²¡æœ‰å®é™…ä½œç”¨
  // è¯·å‹¿ä¿®æ”¹æ­¤å‡½æ•°
[tuture-del]  render () {
[tuture-del]    return (
[tuture-del]      <Index />
[tuture-del]    )
[tuture-add]  render() {
[tuture-add]    return <Index />;
  }
}

[tuture-del]Taro.render(<App />, document.getElementById('app'))
[tuture-add]Taro.render(<App />, document.getElementById("app"));
```

### å¤„ç†è·¯ç”±è·³è½¬

åˆ›å»ºå¹¶æ³¨å†Œäº†é¡µé¢ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ `src/components/PostCard/index.jsx` ç»„ä»¶é‡Œé¢å¤„ç†ç‚¹å‡»å¸–å­åˆ—è¡¨å•ä¸ªå¸–å­çš„è·¯ç”±è·³è½¬äº†ï¼š

```jsx src/components/PostCard/index.jsx
import Taro from "@tarojs/taro";
[tuture-del]import { View, Text, Image } from "@tarojs/components";
[tuture-add]import { View, Text } from "@tarojs/components";

import "./styles.scss";

export default function PostCard(props) {
  const { post } = props;

[tuture-add]  function handleClick() {
[tuture-add]    Taro.navigateTo({
[tuture-add]      url: `/pages/post/post?post=${post}`
[tuture-add]    });
[tuture-add]  }
[tuture-add] 
  return (
[tuture-del]    <View className="post">
[tuture-add]    <View className="post" onClick={handleClick}>
      <Text className="post-name">{post}</Text>
    </View>
  );
}
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ–°å¢äº† `onClick` äº‹ä»¶çš„å¤„ç†æ–¹æ³• `handleClick` ï¼Œå¹¶è°ƒç”¨ Taro æä¾›çš„ `navigateTo` API è¿›è¡Œé¡µé¢ä¹‹é—´çš„è·³è½¬ï¼Œæ›´å¤šé¡µé¢å¯¼èˆªçš„ API å¯ä»¥[å‚è€ƒæ–‡æ¡£](https://nervjs.github.io/taro/docs/apis/interface/navigation/navigateTo.html)ã€‚

ç°åœ¨ä½ å¯ä»¥åœ¨æ·»åŠ å¸–å­ä¹‹åï¼Œç‚¹å‡»å•ä¸ªå¸–å­ï¼Œä½ ä¼šå‘ç°é¡µé¢å‘ç”Ÿè·³è½¬åˆ°å¸–å­è¯¦æƒ…é¡µï¼Œå¹¶å±•ç¤ºäº†å¸–å­çš„å†…å®¹ï¼š

![](https://static.tuture.co/c/224996a/1587388568443-3f666098-0dc9-4096-9755-1284acb9663f.gif)

## æ·»åŠ  TabBar

å¤„ç†äº†å¤šé¡µé¢çš„è·³è½¬ï¼Œä¸€ä¸ªå°ç¨‹åºè¿˜å­˜åœ¨ä¸€äº› TarBar çš„éœ€æ±‚ï¼Œå³åº•éƒ¨æœ‰å‡ ä¸ªæŒ‰é’®è¿›è¡Œå¤šç§ç±»å‹çš„é¡µé¢è·³è½¬ï¼Œæˆ‘ä»¬ä¹Ÿæ¥å‘æ˜ä¸€ä¸‹åœ¨äº¬ä¸œå°ç¨‹åºé‡Œé¢å¦‚ä½•æ·»åŠ  TabBarã€‚

### ç¼–å†™æ–° TabBar é¡µé¢

æˆ‘ä»¬é¦–å…ˆæ¥å»ºç«‹ TabBar éœ€è¦åˆ‡æ¢çš„å¦å¤–ä¸€ä¸ªé¡µé¢ï¼Œä¸€èˆ¬é€»è¾‘é‡Œé¢æ˜¯ â€œæˆ‘çš„â€ é¡µé¢ï¼Œåœ¨ `src/pages` ç›®å½•ä¸‹æ–°å»º `mine` æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨é‡Œé¢åˆ›å»º `mine.jsx` æ–‡ä»¶ï¼Œç¼–å†™å¯¹åº”çš„å†…å®¹å¦‚ä¸‹ï¼š

```jsx src/pages/mine/mine.jsx
import Taro, { useRouter } from "@tarojs/taro";
import { View, Text, Image } from "@tarojs/components";

import "./mine.scss";
import avatar from "../../images/avatar.png";

export default function Mine() {
  return (
    <View className="mine">
      <Image src={avatar} className="mine-avatar" />
      <View className="slogan">
        <Text className="slogan-name">
          å›¾é›€ç¤¾åŒºï¼šäºˆåŠ›å†…å®¹åˆ›ä½œï¼ŒåŠ é€ŸæŠ€æœ¯ä¼ æ’­
        </Text>
      </View>
    </View>
  );
}

Mine.config = {
  navigationBarTitleText: "æˆ‘çš„"
};
```

å¯ä»¥çœ‹åˆ°æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„å‡½æ•°å¼ç»„ä»¶ï¼Œå¹¶ä¸” `config` æˆ‘ä»¬è®¾ç½®äº† â€œæˆ‘çš„â€ çš„æ ‡é¢˜ï¼Œå¹¶ä¸”è¿˜åœ¨ç»„ä»¶ä¸­æ¸²æŸ“äº†ä¸€å¼ å›¾ç‰‡å’Œæ ‡è¯­ï¼Œå›¾ç‰‡å¯ä»¥åœ¨é¡¹ç›®ä¸­è·å–ã€‚1ï¼‰[Github](https://github.com/tuture-dev/jd-miniprogram/tree/master/src)  2ï¼‰[Gitee](https://gitee.com/tuture/jd-miniprogram/tree/master/src/images)

æ¥ç€æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼Œåœ¨ `src/pages/mine/ `ä¸‹åˆ›å»ºå¯¹åº”çš„ `mine.scss` æ–‡ä»¶ï¼Œå¹¶ç¼–å†™å¦‚ä¸‹çš„å†…å®¹ï¼š

```scss src/pages/mine/mine.scss
.mine {
  padding-top: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.mine-avatar {
  width: 300px;
  height: 300px;
  border-radius: 50%;
}

.slogan {
  margin-top: 24px;
}

.slogan-name {
  font-size: 32px;
}
```

### é…ç½® TabBar

å‡†å¤‡å¥½äº† TabBar çš„ç¬¬äºŒä¸ªé¡µé¢ä¹‹åï¼Œæˆ‘ä»¬åœ¨ `src/app.jsx` é‡Œé¢é…ç½®äº¬ä¸œå°ç¨‹åºçš„ TabBarï¼š

```jsx src/app.jsx
import Taro, { Component } from "@tarojs/taro";
import Index from "./pages/index";

import "./app.scss";

// å¦‚æœéœ€è¦åœ¨ h5 ç¯å¢ƒä¸­å¼€å¯ React Devtools
// å–æ¶ˆä»¥ä¸‹æ³¨é‡Šï¼š
// if (process.env.NODE_ENV !== 'production' && process.env.TARO_ENV === 'h5')  {
//   require('nerv-devtools')
// }

class App extends Component {
  componentDidMount() {}

  componentDidShow() {}

  componentDidHide() {}

  componentDidCatchError() {}

  config = {
[tuture-del]    pages: ["pages/index/index", "pages/post/post"],
[tuture-add]    pages: ["pages/index/index", "pages/post/post", "pages/mine/mine"],
    window: {
      backgroundTextStyle: "light",
      navigationBarBackgroundColor: "#fff",
      navigationBarTitleText: "WeChat",
      navigationBarTextStyle: "black"
[tuture-add]    },
[tuture-add]    tabBar: {
[tuture-add]      list: [
[tuture-add]        {
[tuture-add]          pagePath: "pages/index/index",
[tuture-add]          text: "é¦–é¡µ",
[tuture-add]          iconPath: "./images/home.png",
[tuture-add]          selectedIconPath: "./images/homeSelected.png"
[tuture-add]        },
[tuture-add]        {
[tuture-add]          pagePath: "pages/mine/mine",
[tuture-add]          text: "æˆ‘çš„",
[tuture-add]          iconPath: "./images/mine.png",
[tuture-add]          selectedIconPath: "./images/mineSelected.png"
[tuture-add]        }
[tuture-add]      ]
    }
  };

  // åœ¨ App ç±»ä¸­çš„ render() å‡½æ•°æ²¡æœ‰å®é™…ä½œç”¨
  // è¯·å‹¿ä¿®æ”¹æ­¤å‡½æ•°
  render() {
    return <Index />;
  }
}

Taro.render(<App />, document.getElementById("app"));
```

å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨ `config.pages` é‡Œé¢å£°æ˜äº† `pages/mine/mine.jsx` çš„è·¯å¾„ï¼Œç„¶åæˆ‘ä»¬ç»™ `config` é¢å¤–å¢åŠ äº†ä¸€ä¸ª `tabBar` å±æ€§ï¼Œè¿™ä¸ªå¯¹è±¡é‡Œé¢æ˜¯ä¸€ä¸ª `list` å±æ€§ï¼Œç„¶ååœ¨é‡Œé¢åŠ å…¥äº†ä¸¤ä¸ª TabBar é¡µé¢çš„é…ç½®ä¿¡æ¯ï¼š

- `pagePath` ä»£è¡¨å½“å‰é€‰ä¸­ TabBar æ¸²æŸ“çš„é¡µé¢è·¯å¾„
- `text` TabBar çš„å±•ç¤ºæ ‡é¢˜
- `iconPath` TabBar æœªé€‰ä¸­æ—¶å±•ç¤ºçš„å›¾æ ‡
- `selectedIconPath` TabBar é€‰ä¸­æ—¶å±•ç¤ºçš„å›¾æ ‡

æ›´å¤š TabBar çš„é…ç½®ä¿¡æ¯å¯ä»¥[å‚è€ƒæ–‡æ¡£](https://nervjs.github.io/taro/docs/tutorial.html#tabbar)ã€‚ç”¨åˆ°çš„å›¾æ ‡æ–‡ä»¶å¯ä»¥åœ¨é¡¹ç›®ä¸­è·å–ï¼š1ï¼‰[Github](https://github.com/tuture-dev/jd-miniprogram/tree/master/src)  2ï¼‰[Giteeã€‚](https://gitee.com/tuture/jd-miniprogram/tree/master/src/images)

å½“é…ç½®å¥½ä¸Šé¢çš„å†…å®¹ä¹‹åæˆ‘ä»¬åº”è¯¥å¯ä»¥åœ¨äº¬ä¸œå°ç¨‹åºå¼€å‘è€…ç•Œé¢é‡Œé¢çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š

![](https://static.tuture.co/c/224996a/1587388569034-0fdca61a-8391-477e-9e74-1ec224a0624c.gif)

## å‘èµ·ç½‘ç»œè¯·æ±‚

å‰é¢æ‰€æœ‰çš„éƒ½æ˜¯äº†è§£å°ç¨‹åºæœ¬åœ°ç¼–å†™çš„ä¸€äº›å†…å®¹ï¼Œå¤§å¤šæ•°åº”ç”¨è¿˜éœ€è¦ç½‘ç»œè¯·æ±‚è·å–è¿œç¨‹æ•°æ®æ¥è¿›è¡Œå±•ç¤ºï¼Œå½“ç„¶æˆ‘ä»¬çš„äº¬ä¸œå°ç¨‹åºå°é²œä¹Ÿä¸èƒ½æ¼æ‰è¿™ä¸€ç‚¹ã€‚

æˆ‘ä»¬æ‰“å¼€ `src/pages/index/index.jsx` æ–‡ä»¶ï¼Œå¯¹å…¶ä¸­çš„å†…å®¹ä½œå‡ºå¯¹åº”çš„ä¿®æ”¹å¦‚ä¸‹ï¼š

```jsx src/pages/index/index.jsx
[tuture-del]import Taro, { useState } from "@tarojs/taro";
[tuture-add]import Taro, { useState, useEffect } from "@tarojs/taro";
import { View, Button, Textarea } from "@tarojs/components";

import PostCard from "../../components/PostCard";
import "./index.scss";

export default function Index() {
  const [post, setPost] = useState("");
  const [postList, setPostList] = useState([]);

  function handleChange(e) {
    setPost(e.target.value);
  }

  function handleSubmit() {
    console.log("hello world", post);
    if (!post) {
      Taro.showToast({
        title: "å†…å®¹ä¸èƒ½ä¸ºç©º",
        icon: "none"
      });
    } else {
      Taro.showToast({
        title: "å‘è¡¨æˆåŠŸ",
        icon: "success"
      });

      setPost("");
      setPostList(postList.concat(post));
    }
  }

[tuture-add]  useEffect(() => {
[tuture-add]    async function getPosts() {
[tuture-add]      try {
[tuture-add]        const res = await Taro.request({
[tuture-add]          url:
[tuture-add]            "https://9ff4272f-ce60-4be6-9376-f9f462482edc.mock.pstmn.io/articles"
[tuture-add]        });
[tuture-add] 
[tuture-add]        const postList = res.data.map(item => item.name);
[tuture-add]        setPostList(postList);
[tuture-add]      } catch (err) {
[tuture-add]        console.log("err", err);
[tuture-add]      }
[tuture-add]    }
[tuture-add] 
[tuture-add]    getPosts();
[tuture-add]  }, []);
[tuture-add] 
  return (
    <View className="index">
      <Textarea
        placeholder="æ’°å†™ä¼˜è´¨æ•™ç¨‹..."
        className="post-input"
        value={post}
        onInput={handleChange}
        autoHeight
      />
      <Button className="post-button" onClick={handleSubmit}>
        å‘è¡¨
      </Button>
      <View className="post-box">
        {postList.map(postItem => (
          <PostCard post={postItem} />
        ))}
      </View>
    </View>
  );
}

Index.config = {
  navigationBarTitleText: "é¦–é¡µ"
};
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯¼å…¥äº† `useEffect` é’©å­ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥ `getPosts` å‡½æ•°ï¼Œç”¨äºè·å–åˆå§‹çš„å¸–å­åˆ—è¡¨ï¼Œæ¥ç€æˆ‘ä»¬åœ¨è¿™ä¸ªå‡½æ•°ä¸­ä½¿ç”¨ Taro çš„è¯·æ±‚ API `Taro.request` æ¥å‘èµ·ç½‘ç»œè¯·æ±‚ï¼Œå¹¶å°†è¯·æ±‚åˆ°çš„æ•°æ®è¿›è¡Œå¤„ç†æ›´æ–°åˆ° `postList` ä¸­ï¼Œå…³äºæ›´å¤šè¯·æ±‚çš„ API è¯·å‚è€ƒ [Taro æ–‡æ¡£](https://nervjs.github.io/taro/docs/apis/network/request/request.html#docsNav)ã€‚

å½“æ·»åŠ äº†ä¸Šé¢å†…å®¹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ”¶è·å¦‚ä¸‹çš„æ•ˆæœï¼š

![](https://static.tuture.co/c/224996a/1587388568422-eea7383d-94ce-4e18-9a7f-7321e6aa418e.gif)

## æ€»ç»“

é€šè¿‡è¿™ç¯‡æ•™ç¨‹å¿«é€Ÿä¸Šæ‰‹äº¬ä¸œå°ç¨‹åºå¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å¾—ç›Šäº Taro çš„ä¼˜ç§€è·¨ç«¯ç‰¹æ€§ï¼Œå³ä½¿æ˜¯æœ€æ–°åˆšæ¨å‡ºçš„äº¬ä¸œå°ç¨‹åºä¹Ÿå¯ä»¥æ¸¸åˆƒæœ‰ä½™çš„å¼€å‘æˆ‘ä»¬éœ€è¦çš„åŠŸèƒ½ï¼Œè¿™ä¸ç¦è®©æˆ‘æƒ³èµ·äº† Taro Next å‘å¸ƒä¹‹é™…ï¼ŒTaro å›¢é˜Ÿæ˜ç¡®çš„åˆå¿ƒå’Œä½¿å‘½ï¼šâ€œé™ä½å¼€å‘æˆæœ¬ï¼Œæé«˜å¼€å‘ä½“éªŒå’Œå¼€å‘æ•ˆç‡â€ï¼Œä¸å¿˜åˆå¿ƒï¼Œç‰¢è®°ä½¿å‘½ï¼Œè¿™å°±æ˜¯ Taro å›¢é˜Ÿæ‹¥æŠ±å˜åŒ–çš„æ–¹å¼ï¼