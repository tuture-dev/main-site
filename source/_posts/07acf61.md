---
title: 'ä¸€æ¯èŒ¶çš„æ—¶é—´ï¼Œä¸Šæ‰‹ React æ¡†æ¶å¼€å‘'
description: 'Reactï¼ˆä¹Ÿè¢«ç§°ä¸º React.js æˆ–è€… ReactJSï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚èµ·æºäº Facebook å†…éƒ¨é¡¹ç›®ï¼Œæœ€åˆç”¨æ¥æ¶è®¾ Instagram çš„ç½‘ç«™ï¼Œå¹¶äº 2013 å¹´ 5 æœˆå¼€æºã€‚React æ€§èƒ½è¾ƒé«˜ï¼Œå¹¶ä¸”å®ƒçš„å£°æ˜å¼ã€ç»„ä»¶åŒ–ç‰¹æ€§è®©ç¼–å†™ä»£ç å˜å¾—ç®€å•ï¼Œéšç€ React ç¤¾åŒºçš„å‘å±•ï¼Œè¶Šæ¥è¶Šå¤šçš„äººæŠ•å…¥ React çš„å­¦ä¹ å’Œå¼€å‘ï¼Œä½¿å¾— React ä¸ä»…å¯ä»¥ç”¨æ¥å¼€å‘ Web åº”ç”¨ï¼Œè¿˜èƒ½å¼€å‘æ¡Œé¢ç«¯åº”ç”¨ï¼ŒTVåº”ç”¨ï¼ŒVRåº”ç”¨ï¼ŒIoTåº”ç”¨ç­‰ï¼Œå› æ­¤ React è¿˜å…·æœ‰ä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™çš„ç‰¹æ€§ã€‚æœ¬æ•™ç¨‹å°†å¸¦ä½ å¿«é€Ÿå…¥é—¨ React å¼€å‘ï¼Œé€šè¿‡ 20-30 åˆ†é’Ÿçš„å­¦ä¹ ï¼Œä½ ä¸ä»…å¯ä»¥äº†è§£ React çš„åŸºç¡€æ¦‚å¿µï¼Œè€Œä¸”èƒ½å¼€å‘å‡ºä¸€ä¸ªå¾…åŠäº‹é¡¹å°åº”ç”¨ï¼Œè¿˜åœ¨æƒ³ä»€ä¹ˆäº†ï¼Ÿé©¬ä¸Šå­¦èµ·æ¥å§'
tags: ['React']
categories: ['å‰ç«¯', 'React', 'å…¥é—¨']
date: 2019-11-18T14:01:30.319Z
photos:
  - https://static.powerformer.com/c/07acf61/cover.png
---

<div class="profileBox">
  <div class="avatarBox">
    <a href="https://github.com/pftom"><img src="/images/avatars/pftom.jpg" alt="" class="avatar"></a>
  </div>
  <div class="rightBox">
    <div class="infoBox">
    <a href="https://github.com/pftom"><p class="nickName">@pftom</p></a>
  </div>
  <div class="codeBox">
    <a href="https://github.com/pftom/react-quickstart-tutorial"><span class="codeText">æŸ¥çœ‹ä»£ç </span></a>
  </div>
  </div>
</div>

## Hello, World

{% note primary %}
**ä¸»è¦**

æ­¤æ•™ç¨‹å±äº[React å‰ç«¯å·¥ç¨‹å¸ˆå­¦ä¹ è·¯çº¿](https://github.com/tuture-dev/react-roadmap)çš„ä¸€éƒ¨åˆ†ï¼Œç‚¹å‡»å¯æŸ¥çœ‹å…¨éƒ¨å†…å®¹ã€‚
{% endnote %}

### æˆ‘ä»¬å°†æ„å»ºä»€ä¹ˆï¼Ÿ

åœ¨è¿™ç¯‡æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºç»™ä½ å¦‚ä½•ä½¿ç”¨ React æ„å»ºä¸€ä¸ªå¾…åŠäº‹é¡¹åº”ç”¨ï¼Œä¸‹é¢æœ€ç»ˆé¡¹ç›®çš„å±•ç¤ºæˆæœï¼š

![](https://static.powerformer.com/c/07acf61/todolist-show.gif)

ä½ ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æˆ‘ä»¬æœ€åæ„å»ºçš„ç»“æœï¼š[æœ€ç»ˆç»“æœ](https://codesandbox.io/s/currying-grass-rglst)ã€‚å¦‚æœä½ ç°åœ¨å¯¹ä»£ç è¿˜ä¸æ˜¯å¾ˆç†è§£ï¼Œæˆ–è€…ä½ è¿˜ä¸ç†Ÿæ‚‰ä»£ç è¯­æ³•ï¼Œåˆ«æ‹…å¿ƒï¼è¿™ç¯‡æ•™ç¨‹çš„ç›®æ ‡å°±æ˜¯å¸®åŠ©ä½ ç†è§£ React å’Œå®ƒçš„è¯­æ³•ã€‚

æˆ‘ä»¬æ¨èä½ åœ¨ç»§ç»­é˜…è¯»è¿™ç¯‡æ•™ç¨‹ä¹‹å‰å…ˆç†Ÿæ‚‰ä¸€ä¸‹è¿™ä¸ªå¾…åŠäº‹é¡¹ï¼Œä½ ç”šè‡³å¯ä»¥å°è¯•æ·»åŠ å‡ ä¸ªå¾…åŠäº‹é¡¹ï¼ä½ å¯èƒ½æ³¨æ„åˆ°å½“ä½ æ·»åŠ äº† 2 ä¸ªå¾…åŠäº‹é¡¹ä¹‹åï¼Œä¼šå‡ºç°ä¸åŒçš„é¢œè‰²ï¼›è¿™å°±æ˜¯ React ä¸­æ¡ä»¶æ¸²æŸ“çš„é­…åŠ›ã€‚

å½“ä½ ç†Ÿæ‚‰äº†è¿™ä¸ªå¾…åŠäº‹é¡¹ä¹‹åä½ å°±å¯ä»¥å…³é—­å®ƒäº†ã€‚åœ¨è¿™ç¯‡æ•™ç¨‹çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬å°†ä»ä¸€ä¸ª Hello World ä»£ç æ¨¡æ¿å¼€å§‹ï¼Œç„¶åå¸¦é¢†ä½ åˆå§‹åŒ–å¼€å‘ç¯å¢ƒï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¼€å§‹æ„å»ºè¿™ä¸ªå¾…åŠäº‹é¡¹äº†ã€‚

### ä½ å°†å­¦åˆ°ä»€ä¹ˆï¼Ÿ

ä½ å°†å­¦ä¹ æ‰€æœ‰ React çš„åŸºç¡€æ¦‚å¿µï¼Œå…¶ä¸­åˆåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š

- ç¼–å†™ç»„ä»¶ç›¸å…³ï¼šåŒ…æ‹¬ JSX è¯­æ³•ã€Componentã€Props
- ç»„ä»¶çš„äº¤äº’ï¼šåŒ…æ‹¬ State å’Œç”Ÿå‘½å‘¨æœŸ
- ç»„ä»¶çš„æ¸²æŸ“ï¼šåŒ…æ‹¬åˆ—è¡¨å’Œ Keyã€æ¡ä»¶æ¸²æŸ“
- å’Œ DOM & HTML ç›¸å…³ï¼šåŒ…æ‹¬äº‹ä»¶å¤„ç†ã€è¡¨å•ã€‚

### å‰ææ¡ä»¶

æˆ‘ä»¬å‡è®¾ä½ ç†Ÿç³» HTML å’Œ JavaScriptï¼Œä½†å³ä½¿ä½ æ˜¯ä»å…¶ä»–ç¼–ç¨‹è¯­è¨€è½¬è¿‡æ¥çš„ï¼Œä½ ä¹Ÿèƒ½çœ‹æ‡‚è¿™ç¯‡æ•™ç¨‹ã€‚æˆ‘ä»¬è¿˜å‡è®¾ä½ å¯¹ä¸€äº›ç¼–ç¨‹è¯­è¨€çš„æ¦‚å¿µæ¯”è¾ƒç†Ÿæ‚‰ï¼Œæ¯”å¦‚å‡½æ•°ã€å¯¹è±¡ã€æ•°ç»„ï¼Œå¦‚æœå¯¹ç±»äº†è§£å°±æ›´å¥½äº†ã€‚

å¦‚æœä½ éœ€è¦å¤ä¹  JavaScriptï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»[è¿™ç¯‡æŒ‡å—](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/A_re-introduction_to_JavaScript)ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°äº†æˆ‘ä»¬ä½¿ç”¨äº†ä¸€äº› ES6 çš„ç‰¹æ€§ â€“ ä¸€ä¸ªæœ€è¿‘çš„ JavaScript ç‰ˆæœ¬ã€‚åœ¨è¿™ç¯‡æ•™ç¨‹ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ [arrow functions](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Arrow_functions)ï¼Œ[classes](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes)ï¼Œå’Œ [const](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/const)ã€‚ä½ å¯ä»¥ä½¿ç”¨ [Babel REPL](https://www.babeljs.cn/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYewdgzgLgBApgGzgWzmWBeGAeAFgRgD4AJRBEAGhgHcQAnBAEwEJsB6AwgbgChRJY_KAEMAlmDh0YWRiGABXVOgB0AczhQAokiVQAQgE8AkowAUAcjogQUcwEpeAJTjDgUACIB5ALLK6aRklTRBQ0KCohMQk6Bx4gA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=react&prettier=false&targets=&version=7.7.3) æ¥æ£€æŸ¥ ES6 ä»£ç ç¼–è¯‘ä¹‹åçš„ç»“æœã€‚

### ç¯å¢ƒå‡†å¤‡

é¦–å…ˆå‡†å¤‡ Node å¼€å‘ç¯å¢ƒï¼Œè®¿é—® [Node å®˜æ–¹ç½‘ç«™](https://nodejs.org/zh-cn/)ä¸‹è½½å¹¶å®‰è£…ã€‚æ‰“å¼€ç»ˆç«¯è¾“å…¥å¦‚ä¸‹å‘½ä»¤æ£€æµ‹ Node æ˜¯å¦å®‰è£…æˆåŠŸï¼š

```Bash
node -v # v10.16.0
npm -v # 6.9.0
```

{% note warning %}
**æ³¨æ„**

Windows ç”¨æˆ·éœ€è¦æ‰“å¼€ cmd å·¥å…·ï¼ŒMac å’Œ Linux æ˜¯ç»ˆç«¯ã€‚
{% endnote %}

å¦‚æœä¸Šé¢çš„å‘½ä»¤æœ‰è¾“å‡ºä¸”æ— æŠ¥é”™ï¼Œé‚£ä¹ˆä»£è¡¨ Node ç¯å¢ƒå®‰è£…æˆåŠŸã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä½¿ç”¨ React è„šæ‰‹æ¶ â€“ [Create React App](https://create-react-app.dev/)ï¼ˆç®€ç§° CRAï¼‰æ¥åˆå§‹åŒ–é¡¹ç›®ï¼ŒåŒæ—¶è¿™ä¹Ÿæ˜¯å®˜æ–¹æ¨èåˆå§‹åŒ– React é¡¹ç›®çš„æœ€ä½³æ–¹å¼ã€‚

åœ¨ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š

```Bash
npx create-react-app my-todolist
```

ç­‰å¾…å‘½ä»¤è¿è¡Œå®Œæˆï¼Œæ¥ç€è¾“å…¥å¦‚ä¸‹å‘½ä»¤å¼€å¯é¡¹ç›®ï¼š

```Bash
cd my-todolist && npm start
```

CRA ä¼šè‡ªåŠ¨å¼€å¯é¡¹ç›®å¹¶æ‰“å¼€æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„ç»“æœï¼š

![](https://static.powerformer.com/c/07acf61/image.png)

ğŸ‰ğŸ‰ğŸ‰ æ­å–œä½ ï¼æˆåŠŸåˆ›å»ºäº†ç¬¬ä¸€ä¸ª React åº”ç”¨ï¼

ç°åœ¨ CRA åˆå§‹åŒ–çš„é¡¹ç›®é‡Œæœ‰å¾ˆå¤šæ— å…³çš„å†…å®¹ï¼Œä¸ºäº†å¼€å§‹æ¥ä¸‹æ¥çš„å­¦ä¹ ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åšä¸€ç‚¹æ¸…ç†å·¥ä½œã€‚é¦–å…ˆåœ¨ç»ˆç«¯ä¸­æŒ‰ `ctrl + c` å…³é—­åˆšåˆšè¿è¡Œçš„å¼€å‘ç¯å¢ƒï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­ä¾æ¬¡è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤ï¼š

```Bash
# è¿›å…¥ src ç›®å½•
cd src

# å¦‚æœä½ åœ¨ä½¿ç”¨ Mac æˆ–è€… Linuxï¼š
rm -f *

# æˆ–è€…ï¼Œä½ åœ¨ä½¿ç”¨ Windowsï¼š
del *

# ç„¶åï¼Œåˆ›å»ºæˆ‘ä»¬å°†å­¦ä¹ ç”¨çš„ JS æ–‡ä»¶
# å¦‚æœä½ åœ¨ä½¿ç”¨ Mac æˆ–è€… Linuxï¼š
touch index.js

# æˆ–è€…ï¼Œä½ åœ¨ä½¿ç”¨ Windows
type nul > index.js

# æœ€åï¼Œåˆ‡å›åˆ°é¡¹ç›®ç›®å½•æ–‡ä»¶å¤¹ä¸‹
cd ..
```

æ­¤æ—¶å¦‚æœåœ¨ç»ˆç«¯é¡¹ç›®ç›®å½•ä¸‹è¿è¡Œ `npm start` ä¼šæŠ¥é”™ï¼Œå› ä¸ºæˆ‘ä»¬çš„ `index.js` è¿˜æ²¡æœ‰å†…å®¹ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ `ctrl +c ` å…³é—­å¼€å‘æœåŠ¡å™¨ï¼Œç„¶åä½¿ç”¨ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®ï¼Œåœ¨åˆšåˆšåˆ›å»ºçš„ index.js æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/a491123/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
import React from 'react';
import ReactDOM from 'react-dom';

class App extends React.Component {
  render() {
    return <div>Hello, World</div>;
  }
}

ReactDOM.render(<App />, document.getElementById('root'));
```

æˆ‘ä»¬çœ‹åˆ° `index.js` é‡Œé¢çš„ä»£ç åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚

é¦–å…ˆæ˜¯ä¸€ç³»åˆ—å¯¼åŒ…ï¼Œæˆ‘ä»¬å¯¼å…¥äº† `react` åŒ…ï¼Œå¹¶å‘½åä¸º Reactï¼Œå¯¼å…¥äº† `react-dom` åŒ…å¹¶å‘½åä¸º ReactDOMã€‚å¯¹äºåŒ…å« React ç»„ä»¶ï¼ˆæˆ‘ä»¬å°†åœ¨ä¹‹åè®²è§£ï¼‰çš„æ–‡ä»¶éƒ½å¿…é¡»åœ¨æ–‡ä»¶å¼€å¤´å¯¼å…¥ Reactã€‚

ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª React [ç»„ä»¶](#component)ï¼Œå‘½åä¸º Appï¼Œç»§æ‰¿è‡ª React.Componentï¼Œç»„ä»¶çš„å†…å®¹æˆ‘ä»¬å°†ä¼šåœ¨åé¢è¿›è¡Œè®²è§£ã€‚

æ¥ç€æˆ‘ä»¬ä½¿ç”¨ ReactDOM çš„ render æ–¹æ³•æ¥æ¸²æŸ“åˆšåˆšå®šä¹‰çš„ App ç»„ä»¶ï¼Œ`render `æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæˆ‘ä»¬çš„ React æ ¹çº§ç»„ä»¶ï¼Œç¬¬äºŒä¸ªå‚æ•°æ¥æ”¶ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œä»£è¡¨æˆ‘ä»¬å°†æŠŠå’Œ React åº”ç”¨æŒ‚è½½åˆ°è¿™ä¸ª DOM èŠ‚ç‚¹ä¸‹ï¼Œè¿›è€Œæ¸²æŸ“åˆ°æµè§ˆå™¨ä¸­ã€‚

{% note warning %}
**æ³¨æ„**

ä¸Šé¢ä»£ç çš„ä¸‰ä¸ªéƒ¨åˆ†ä¸­ï¼Œ**ç¬¬ä¸€éƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†åœ¨æ•´ç¯‡æ•™ç¨‹ä¸­æ˜¯ä¸ä¼šä¿®æ”¹çš„**ï¼ŒåŒæ—¶åœ¨ç¼–å†™ä»»æ„ React åº”ç”¨ï¼Œè¿™ä¸¤ä¸ªéƒ¨åˆ†éƒ½æ˜¯å¿…é¡»çš„ã€‚åé¢æ‰€æœ‰æ¶‰åŠåˆ°çš„ä»£ç ä¿®æ”¹éƒ½æ˜¯å…³äºç¬¬äºŒéƒ¨åˆ†ä»£ç çš„ä¿®æ”¹ï¼Œæˆ–è€…æ˜¯åœ¨ç¬¬ä¸€éƒ¨åˆ†åˆ°ç¬¬ä¸‰éƒ¨åˆ†ä¹‹é—´æ’å…¥æˆ–åˆ é™¤ä»£ç ã€‚
{% endnote %}

ä¿å­˜ä»£ç ï¼Œåœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ `npm start` å‘½ä»¤å¼€å¯å¼€å‘æœåŠ¡å™¨ï¼Œç°åœ¨æµè§ˆå™¨åº”è¯¥ä¼šæ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-d9453668ccb58bed.png)

å‡†å¤‡å·¥ä½œå·²ç»å°±ç»ªï¼

ä½ å¯èƒ½å¯¹ä¸Šé¢çš„ä»£ç ç»†èŠ‚è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å°†é©¬ä¸Šå¸¦ä½ é¢†ç•¥ React çš„ç¥å¥‡ä¸–ç•Œï¼

## JSX è¯­æ³•

é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ React å¼•ä»¥ä¸ºå‚²çš„ç‰¹æ€§ä¹‹ä¸€ â€“ JSXã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ JS ä»£ç ä¸­ä½¿ç”¨ XML è¯­æ³•æ¥ç¼–å†™ç”¨æˆ·ç•Œé¢ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥å……åˆ†çš„åˆ©ç”¨ JS çš„å¼ºå¤§ç‰¹æ€§æ¥æ“ä½œç”¨æˆ·ç•Œé¢ã€‚

ä¸€ä¸ª React ç»„ä»¶çš„ render æ–¹æ³•ä¸­ `return` çš„å†…å®¹å°±ä¸ºè¿™ä¸ªç»„ä»¶æ‰€å°†æ¸²æŸ“çš„å†…å®¹ã€‚æ¯”å¦‚æˆ‘ä»¬ç°åœ¨çš„ä»£ç ï¼š

```JavaScript
render() {
    return <div>Hello, World</div>;
}
```

è¿™é‡Œçš„ `<div>Hello, World</div>` æ˜¯ä¸€æ®µ JSX ä»£ç ï¼Œå®ƒæœ€ç»ˆä¼šè¢« [Babel](https://www.babeljs.cn/) è½¬è¯‘æˆä¸‹é¢è¿™æ®µ JS ä»£ç :

```JavaScript
React.createElement(
  'div',
  null,
  'Hello, World'
)
```

`React.createElement()` æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š

- ç¬¬ä¸€ä¸ªå‚æ•°ä»£è¡¨ JSX å…ƒç´ æ ‡ç­¾ã€‚
- ç¬¬äºŒä¸ªå‚æ•°ä»£è¡¨è¿™ä¸ª JSX å…ƒç´ æ¥æ”¶çš„å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™é‡Œå› ä¸ºæˆ‘ä»¬çš„ `div` æ²¡æœ‰æ¥æ”¶ä»»ä½•å±æ€§ï¼Œæ‰€ä»¥å®ƒæ˜¯ `null`ã€‚
- ç¬¬ä¸‰ä¸ªå‚æ•°ä»£è¡¨ JSX å…ƒç´ åŒ…è£¹çš„å†…å®¹ã€‚

`React.createElement()` ä¼šå¯¹å‚æ•°åšä¸€äº›æ£€æŸ¥ç¡®ä¿ä½ å†™çš„ä»£ç ä¸ä¼šäº§ç”Ÿ BUGï¼Œå®ƒæœ€ç»ˆä¼šåˆ›å»ºä¸€ä¸ªç±»ä¼¼ä¸‹é¢çš„å¯¹è±¡ï¼š

```JavaScript
{
  type: 'div',
  props: {
    children: 'Hello, World'
  }
};
```

è¿™äº›å¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œReact Elementâ€ã€‚ä½ å¯ä»¥è®¤ä¸ºå®ƒä»¬æè¿°äº†ä½ æƒ³è¦åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å†…å®¹ã€‚React å°†ä¼šæ¥æ”¶è¿™äº›å¯¹è±¡ï¼Œä½¿ç”¨å®ƒä»¬æ¥æ„å»º DOMï¼Œå¹¶ä¸”å¯¹å®ƒä»¬è¿›è¡Œæ›´æ–°ã€‚

{% note warning %}
**æ³¨æ„**

æˆ‘ä»¬æ¨èä½ ä½¿ç”¨ [â€œBabelâ€ ](https://www.babeljs.cn/repl#?babili=false&browsers=&build=&builtIns=false&spec=false&loose=false&code_lz=MYewdgzgLgBApgGzgWzmWBeGAeAFgRgD4AJRBEAGhgHUQAnBAE2wHoDCBuAKFEll6gBDAJZg4dGFkYhgAV1ToAdAHM4UAKJIFUAEIBPAJKMAFAHI6IEFFMBKbgCU4g4FAAiAeQCyiumkbjjRBQ0KCoBETE6Oy4gA&debug=false&forceAllTransforms=false&shippedProposals=false&circleciRepo=&evaluate=false&fileSize=false&timeTravel=false&sourceType=module&lineWrap=true&presets=react&prettier=false&targets=&version=7.7.3) æŸ¥çœ‹ JSX çš„ç¼–è¯‘ç»“æœã€‚
{% endnote %}

App ç»„ä»¶æœ€ç»ˆè¿”å›è¿™æ®µ JSX ä»£ç ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ ReactDOM çš„ `render` æ–¹æ³•æ¸²æŸ“ App ç»„ä»¶ï¼Œæœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å°±æ˜¯ `Hello, World"` å†…å®¹ã€‚

### JSX ä½œä¸ºå˜é‡ä½¿ç”¨

å› ä¸º JSX æœ€ç»ˆä¼šè¢«ç¼–è¯‘æˆä¸€ä¸ª JS å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒå½“åšä¸€ä¸ª JS å¯¹è±¡ä½¿ç”¨ï¼Œå®ƒäº«æœ‰å’Œä¸€ä¸ª JS å¯¹è±¡åŒç­‰çš„åœ°ä½ï¼Œæ¯”å¦‚å¯ä»¥å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸Šé¢ä»£ç ä¸­çš„ render æ–¹æ³•å¦‚ä¸‹ï¼š

```JavaScript
render() {
  const element = <div>Hello, World</div>;
  return element;
}
```

ä¿å­˜ä»£ç ï¼Œæˆ‘ä»¬å‘ç°æµè§ˆå™¨ä¸­æ¸²æŸ“çš„å†…å®¹å’Œæˆ‘ä»¬ä¹‹å‰ç±»ä¼¼ã€‚

### åœ¨ JSX ä¸­ä½¿ç”¨å˜é‡

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤§æ‹¬å· `{% raw %}{}{% endraw %}` åœ¨ JSX ä¸­åŠ¨æ€çš„æ’å…¥å˜é‡å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹ render æ–¹æ³•å¦‚ä¸‹ï¼š

```JavaScript
render() {
  const content = "World";
  const element = <div>Hello, {content}</div>;
  return element;
}
```

ä¿å­˜ä»£ç ï¼Œå‘ç°æµè§ˆå™¨ä¸­æ•ˆæœä¾ç„¶ä¸å˜ã€‚

### JSX ä¸­ä½¿ç”¨ JSX

æˆ‘ä»¬å¯ä»¥åœ¨ JSX ä¸­å†åŒ…å« JSXï¼Œè¿™æ ·æˆ‘ä»¬ç¼–å†™ä»»æ„å±‚æ¬¡çš„ HTML ç»“æ„ï¼š

```JavaScript
render() {
    const element = <li>Hello, World</li>
    return (
      <div>
        <ul>
          {element}
        </ul>
      </div>
    )
  }
```

### JSX ä¸­æ·»åŠ èŠ‚ç‚¹å±æ€§

æˆ‘ä»¬å¯ä»¥åƒåœ¨ HTML ä¸­ä¸€æ ·ï¼Œç»™å…ƒç´ æ ‡ç­¾åŠ ä¸Šå±æ€§ï¼Œåªä¸è¿‡æˆ‘ä»¬éœ€è¦éµå®ˆ[é©¼å³°å¼å‘½å](https://baike.baidu.com/item/%E9%AA%86%E9%A9%BC%E5%91%BD%E5%90%8D%E6%B3%95)æ³•åˆ™ï¼Œæ¯”å¦‚åœ¨ HTML ä¸Šçš„å±æ€§ `data-index` åœ¨ JSX èŠ‚ç‚¹ä¸Šè¦å†™æˆ `dataIndex`ã€‚

```JavaScript
const element = <div dataIndex="0">Hello, World</div>;
```

{% note warning %}
**æ³¨æ„**

åœ¨ JSX ä¸­æ‰€æœ‰çš„å±æ€§éƒ½è¦æ›´æ¢æˆé©¼å³°å¼å‘½åï¼Œæ¯”å¦‚ `onclick` è¦æ”¹æˆ `onClick`ï¼Œå”¯ä¸€æ¯”è¾ƒç‰¹æ®Šçš„å°±æ˜¯ `class`ï¼Œå› ä¸ºåœ¨ JS ä¸­ `class` æ˜¯ä¿ç•™å­—ï¼Œæˆ‘ä»¬è¦æŠŠ `class` æ”¹æˆ `className` ã€‚
{% endnote %}

```JavaScript
const element = <div className="app">Hello, World</div>;
```

### å®æˆ˜

æˆ‘ä»¬ä½¿ç”¨è¿™ä¸€èŠ‚è®²è§£çš„ JSX çŸ¥è¯†ï¼Œæ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€ `src/index.js` ï¼Œå¯¹æˆ‘ä»¬çš„ç¬¬äºŒæ®µä»£ç åšå¦‚ä¸‹æ”¹å˜ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/517171b/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...

class App extends React.Component {
  render() {
[tuture-del]    return <div>Hello, World</div>;
[tuture-add]    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
[tuture-add]    return (
[tuture-add]      <ul>
[tuture-add]        <li>Hello, {todoList[0]}</li>
[tuture-add]        <li>Hello, {todoList[1]}</li>
[tuture-add]        <li>Hello, {todoList[2]}</li>
[tuture-add]        <li>Hello, {todoList[3]}</li>
[tuture-add]      </ul>
[tuture-add]    );
  }
}

// ...
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨ `const` å®šä¹‰äº†ä¸€ä¸ª `todoList` æ•°ç»„å¸¸é‡ï¼Œå¹¶ä¸”åœ¨ JSX ä¸­ä½¿ç”¨ `{% raw %}{}{% endraw %}` è¿›è¡ŒåŠ¨æ€æ’å€¼ï¼Œæ’å…¥äº†æ•°ç»„çš„å››ä¸ªå…ƒç´ ã€‚

æœ€åä¿å­˜ä»£ç ï¼Œæµè§ˆå™¨ä¸­çš„æ•ˆæœåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

![](https://static.powerformer.com/c/07acf61/image-fe47616b222f85ce.png)

{% note info %}
**æç¤º**

æ— éœ€å…³é—­åˆšæ‰ä½¿ç”¨ `npm start` å¼€å¯çš„å¼€å‘æœåŠ¡å™¨ï¼Œä¿®æ”¹ä»£ç åï¼Œæµè§ˆå™¨ä¸­çš„å†…å®¹å°†ä¼šè‡ªåŠ¨åˆ·æ–°ï¼
{% endnote %}

ä½ å¯èƒ½æ³¨æ„åˆ°äº†æˆ‘ä»¬æ‰‹åŠ¨è·å–äº†æ•°ç»„çš„å››ä¸ªå€¼ï¼Œç„¶åé€ä¸€çš„ç”¨ `{% raw %}{}{% endraw %}` è¯­æ³•æ’å…¥åˆ° JSX ä¸­å¹¶æœ€ç»ˆæ¸²æŸ“ï¼Œè¿™æ ·åšè¿˜æ¯”è¾ƒåŸå§‹ï¼Œæˆ‘ä»¬å°†åœ¨åé¢ [åˆ—è¡¨å’Œ Key](%E5%88%97%E8%A1%A8%E5%92%8C-key) å°èŠ‚ä¸­ç®€åŒ–è¿™ç§å†™æ³•ã€‚

åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº† JSX çš„æ¦‚å¿µï¼Œå¹¶ä¸”å®è·µäº†ç›¸å…³çš„çŸ¥è¯†ã€‚æˆ‘ä»¬è¿˜æå‡ºäº†ç»„ä»¶çš„æ¦‚å¿µï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ·±å…¥è®²è§£å®ƒï¼Œåœ¨ä¸‹ä¸€å°èŠ‚ä¸­æˆ‘ä»¬å°†è¯¦ç»†åœ°è®²è§£[ç»„ä»¶](#component)çš„çŸ¥è¯†ã€‚

## Component

React çš„æ ¸å¿ƒç‰¹ç‚¹ä¹‹ä¸€å°±æ˜¯ç»„ä»¶åŒ–ï¼Œå³æˆ‘ä»¬å°†å·¨å¤§çš„ä¸šåŠ¡é€»è¾‘æ‹†åˆ†æˆä¸€ä¸ªä¸ªé€»è¾‘æ¸…æ™°çš„å°ç»„ä»¶ï¼Œç„¶åé€šè¿‡ç»„åˆè¿™äº›ç»„ä»¶æ¥å®Œæˆä¸šåŠ¡åŠŸèƒ½ã€‚

React æä¾›ä¸¤ç§ç»„ä»¶å†™æ³•ï¼š1ï¼‰å‡½æ•°å¼ç»„ä»¶ 2ï¼‰ç±»ç»„ä»¶ã€‚

### å‡½æ•°å¼ç»„ä»¶

åœ¨ React ä¸­ï¼Œå‡½æ•°å¼ç»„ä»¶ä¼šé»˜è®¤æ¥æ”¶ä¸€ä¸ª `props` å‚æ•°ï¼Œç„¶åè¿”å›ä¸€æ®µ JSXï¼š

```JavaScript
function Todo(props) {
  return <li>Hello, å›¾é›€</li>;
}
```

å…³äº `props` æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­è®²è§£ã€‚

### ç±»ç»„ä»¶

é€šè¿‡ç»§æ‰¿è‡ª React.Component çš„ç±»æ¥ä»£è¡¨ä¸€ä¸ªç»„ä»¶ã€‚

```JavaScript
class Todo extends React.Component {
  render() {
    return <li>Hello, å›¾é›€</li>;
  }
}
```

æˆ‘ä»¬å‘ç°ï¼Œåœ¨ç±»ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `render` æ–¹æ³•é‡Œé¢è¿”å›éœ€è¦æ¸²æŸ“çš„ JSXã€‚

### ç»„ä»¶ç»„åˆ

æˆ‘ä»¬å¯ä»¥ç»„åˆä¸åŒçš„ç»„ä»¶æ¥å®Œæˆå¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼š

```JavaScript
class App extends React.Component {
  render() {
    return (
      <ul>
        <Todo />
        <Todo />
      </ul>
    );
  }
}
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨ç±»ç»„ä»¶ App ä¸­ä½¿ç”¨äº†æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ Todo ç»„ä»¶ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç»„ä»¶ä»¥ `<Component />` çš„å½¢å¼ä½¿ç”¨ï¼Œæ¯”å¦‚ Todo ç»„ä»¶ä½¿ç”¨æ—¶ä¸º `<Todo />`ï¼Œæˆ‘ä»¬åœ¨ Todo ç»„ä»¶æ²¡æœ‰å­ç»„ä»¶æ—¶ä½¿ç”¨è¿™ç§å†™æ³•ï¼›å½“ Todo ç»„ä»¶éœ€è¦åŒ…å«å­ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å†™æˆä¸‹é¢çš„å½¢å¼ï¼š

```JavaScript
class App extends React.Component {
  render() {
    return (
      <ul>
        <Todo>Hello World</Todo>
        <Todo>Hello Tuture</Todo>>
      </ul>
    );
  }
}
```

### ç»„ä»¶æ¸²æŸ“

æˆ‘ä»¬åœ¨ç¬¬ä¸€èŠ‚ä¸­è®²åˆ°ï¼Œé€šè¿‡ `ReactDOM.render` æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š1ï¼‰æ ¹ç»„ä»¶ 2) å¾…æŒ‚è½½çš„ DOM èŠ‚ç‚¹ï¼Œå¯ä»¥å°†ç»„ä»¶çš„å†…å®¹æ¸²æŸ“åˆ° HTML ä¸­ã€‚

```JavaScript
ReactDOM.render(<App />, document.getElementById('root'));
```

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨åœ¨è¿™ä¸€èŠ‚ä¸­å­¦åˆ°çš„ç»„ä»¶çŸ¥è¯†æ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª Todo ç±»ç»„ä»¶ï¼Œç”¨äºä»£è¡¨å•ä¸ªå¾…åŠäº‹é¡¹ï¼Œç„¶ååœ¨ App ç±»ç»„ä»¶ä¸­ä½¿ç”¨ Todo ç»„ä»¶ã€‚

æ‰“å¼€ `src/index.js` æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯¹ä»£ç åšå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/fa38333/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
import React from "react";
import ReactDOM from "react-dom";

[tuture-add]class Todo extends React.Component {
[tuture-add]  render() {
[tuture-add]    return <li>Hello, å›¾é›€</li>;
[tuture-add]  }
[tuture-add]}
[tuture-add]
class App extends React.Component {
  render() {
    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    return (
      <ul>
[tuture-del]        <li>Hello, {todoList[0]}</li>
[tuture-del]        <li>Hello, {todoList[1]}</li>
[tuture-del]        <li>Hello, {todoList[2]}</li>
[tuture-del]        <li>Hello, {todoList[3]}</li>
[tuture-add]        <Todo />
[tuture-add]        <Todo />
[tuture-add]        <Todo />
[tuture-add]        <Todo />
      </ul>
    );
  }
// ...
```

{% note warning %}
**æ³¨æ„**

æˆ‘ä»¬åœ¨åªä¿®æ”¹äº† App ç»„ä»¶çš„å†…å®¹ï¼Œç„¶åé¢å¤–å¢åŠ äº†ä¸€ä¸ª Todo ç»„ä»¶ï¼Œæ•´ä¸ª `src/index.js` æ–‡ä»¶çš„å…¶ä»–ä»£ç å†…å®¹æˆ‘ä»¬æ²¡æœ‰åšå‡ºä¿®æ”¹ã€‚åé¢æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ä¿®æ”¹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚
{% endnote %}

ä¿å­˜ä»£ç ï¼Œç„¶åä½ åº”è¯¥å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š

![](https://static.powerformer.com/c/07acf61/image-d0c6124fca32b8af.png)

ä½ å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬æš‚æ—¶æ²¡æœ‰ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„ todoList æ•°ç»„ï¼Œè€Œæ˜¯ä½¿ç”¨äº†å››ä¸ªç›¸åŒçš„ Todo ç»„ä»¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ç»§æ‰¿è‡ª `React.Component` ç±»çš„å½¢å¼å®šä¹‰ Todo ç»„ä»¶ï¼Œç„¶ååœ¨ç»„ä»¶çš„ `render` ä¸­è¿”å›äº† `<li>Hello, å›¾é›€</li>`ï¼Œæ‰€ä»¥æœ€ç»ˆæµè§ˆå™¨ä¸­ä¼šæ¸²æŸ“å››ä¸ª `"Hello, å›¾é›€"`ã€‚

å¹¶ä¸”å› ä¸º Todo ç»„ä»¶ä¸éœ€è¦åŒ…å«å­ç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å†™æˆäº† `<Todo />` çš„å½¢å¼ã€‚

ç°åœ¨ 4 ä¸ªå¾…åŠäº‹é¡¹éƒ½æ˜¯ä¸€æ ·çš„å†…å®¹ï¼Œè¿™æœ‰ç‚¹å•è°ƒï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœå¯ä»¥åƒè°ƒç”¨å‡½æ•°é‚£æ ·å¯ä»¥é€šè¿‡ä¼ å‚å¯¹ç»„ä»¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶å°±å¥½äº†ï¼Œä½ çš„æƒ³æ³•æ˜¯å¯¹çš„ï¼æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­å¼•å‡º propsï¼Œå®ƒå…è®¸ä½ ç»™ç»„ä»¶ä¼ é€’å†…å®¹ï¼Œä»è€Œè¿›è¡Œä¸ªæ€§åŒ–å†…å®¹å®šåˆ¶ã€‚

## Props

React ä¸ºç»„ä»¶æä¾›äº† Propsï¼Œä½¿å¾—åœ¨ä½¿ç”¨ç»„ä»¶æ—¶ï¼Œå¯ä»¥ç»™ç»„ä»¶ä¼ å…¥å±æ€§è¿›è¡Œä¸ªæ€§åŒ–æ¸²æŸ“ã€‚

### å‡½æ•°å¼ç»„ä»¶ä¸­ä½¿ç”¨ Props

å‡½æ•°å¼ç»„ä»¶é»˜è®¤æ¥æ”¶ `props` å‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºä¿å­˜çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„å†…å®¹ï¼š

```JavaScript
function Todo(props) {
  return (
    <li>Hello, {props.content}</li>
  )
}

<Todo content="å›¾é›€" />
```

æˆ‘ä»¬ç»™ Todo å‡½æ•°å¼ç»„ä»¶ä¼ é€’äº†ä¸€ä¸ª `content` å±æ€§ï¼Œ å®ƒçš„å€¼ä¸º `"å›¾é›€"` ï¼Œæ‰€æœ‰ä¼ é€’çš„å±æ€§éƒ½ä¼šåˆå¹¶è¿› `props` å¯¹è±¡ä¸­ï¼Œç„¶åä¼ é€’ç»™ Todo ç»„ä»¶ï¼Œè¿™é‡Œ `props` å¯¹è±¡æ˜¯è¿™æ ·çš„ `{% raw %}props = { content: "å›¾é›€" }{% endraw %}` ï¼Œå¦‚æœæˆ‘ä»¬å†ä¼ é€’ä¸€ä¸ªå±æ€§ï¼š

```JavaScript
<Todo content="å›¾é›€" from="å›¾é›€ç¤¾åŒº" />
```

æœ€ç»ˆ `props` å¯¹è±¡å°±ä¼šå˜æˆè¿™æ ·ï¼š`{% raw %}props={ content: "å›¾é›€", from: "å›¾é›€ç¤¾åŒº" }{% endraw %}`ã€‚

{% note warning %}
**æ³¨æ„**

å¦‚æœç»™ç»„ä»¶ä¼ é€’ `key` å±æ€§æ˜¯ä¸ä¼šå¹¶å…¥ props å¯¹è±¡ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å­ç»„ä»¶ä¸­ä¹Ÿå–ä¸åˆ° `key` å±æ€§ï¼Œæˆ‘ä»¬å°†åœ¨[ åˆ—è¡¨å’Œ Key](#%E5%88%97%E8%A1%A8%E5%92%8C-key) ä¸­è¯¦ç»†è®²è§£ã€‚
{% endnote %}

### ç±»ç»„ä»¶ä¸­ä½¿ç”¨ Props

ç±»ç»„ä»¶ä¸­åŸºæœ¬å’Œå‡½æ•°å¼ç»„ä»¶ä¸­çš„ Props ä¿æŒä¸€è‡´ï¼Œé™¤äº†æ˜¯é€šè¿‡ `this.props` æ¥è·å–çˆ¶ç»„ä»¶ä¼ é€’ä¸‹æ¥çš„å±æ€§å†…å®¹ï¼š

```JavaScript
class Todo extends React.Component {
  render() {
    return <li>Hello, {this.props.content}</li>;
  }
}

<Todo content="å›¾é›€" />
```

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨è¿™ä¸€èŠ‚ä¸­å­¦åˆ°çš„ Props çŸ¥è¯†æ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

æ‰“å¼€ `src/index.js` æ–‡ä»¶ï¼Œå¯¹ Todo ç»„ä»¶å’Œ App ç»„ä»¶åšå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/4e765ff/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...

class Todo extends React.Component {
  render() {
[tuture-del]    return <li>Hello, å›¾é›€</li>;
[tuture-add]    return <li>Hello, {this.props.content}</li>;
  }
}

// ...
    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    return (
      <ul>
[tuture-del]        <Todo />
[tuture-del]        <Todo />
[tuture-del]        <Todo />
[tuture-del]        <Todo />
[tuture-add]        <Todo content={todoList[0]} />
[tuture-add]        <Todo content={todoList[1]} />
[tuture-add]        <Todo content={todoList[2]} />
[tuture-add]        <Todo content={todoList[3]} />
      </ul>
    );
  }
// ...
```

æ³¨æ„åˆ°æˆ‘ä»¬åˆé‡æ–°å¼€å§‹ä½¿ç”¨ä¹‹å‰å®šä¹‰çš„ todoList æ•°ç»„ï¼Œç„¶åç»™æ¯ä¸ª Todo ç»„ä»¶ä¼ é€’ä¸€ä¸ª `content` å±æ€§ï¼Œåˆ†åˆ«èµ‹å€¼æ•°ç»„çš„æ¯ä¸€é¡¹ï¼Œæœ€ååœ¨ Todo ç»„ä»¶ä¸­ä½¿ç”¨æˆ‘ä»¬ä¼ é€’ä¸‹æ¥çš„ `content` å±æ€§ã€‚

ä¿å­˜ä¿®æ”¹çš„å†…å®¹ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°å¦‚ä¸‹çš„å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-1ccb228d6f96581c.png)

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„å†…å®¹åˆå›æ¥äº†ï¼Œå’Œæˆ‘ä»¬ä¹‹å‰åœ¨ [JSX](#jsx-%E8%AF%AD%E6%B3%95) ä¸­çœ‹åˆ°çš„å†…å®¹ä¸€æ ·ï¼Œä½†æ˜¯è¿™ä¸€æ¬¡æˆ‘ä»¬æˆåŠŸä½¿ç”¨äº†ç»„ä»¶æ¥æ¸²æŸ“æ¥æ”¶åˆ°çš„ Props å†…å®¹ã€‚

## State å’Œç”Ÿå‘½å‘¨æœŸ

React é€šè¿‡ç»™ç±»ç»„ä»¶æä¾› State æ¥åˆ›é€ äº¤äº’å¼çš„å†…å®¹ â€“ å³å†…å®¹å¯ä»¥åœ¨æ¸²æŸ“ä¹‹åå‘ç”Ÿå˜åŒ–ã€‚

### å®šä¹‰ State

é€šè¿‡åœ¨ç±»ç»„ä»¶ä¸­æ·»åŠ  `constructor` æ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä¸­å®šä¹‰å’Œåˆå§‹åŒ– Stateï¼š

```JavaScript
constructor(props) {
    super(props);

    this.state = {
      todoList: ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"]
    };
  }
```

è¿™é‡Œ constructor æ–¹æ³•æ¥æ”¶çš„ props å±æ€§å°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­è®²åˆ°çš„é‚£ä¸ª propsï¼›å¹¶ä¸” React çº¦å®šæ¯ä¸ªç»§æ‰¿è‡ª React.Component çš„ç»„ä»¶åœ¨å®šä¹‰ constructor æ–¹æ³•æ—¶ï¼Œè¦åœ¨æ–¹æ³•å†…é¦–è¡ŒåŠ å…¥ `super(props)` ã€‚

æ¥ç€æˆ‘ä»¬ `this.state` æ¥å®šä¹‰ç»„ä»¶çš„ stateï¼Œå¹¶ä½¿ç”¨ `{% raw %}{ todoList: ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"] }{% endraw %}` å¯¹è±¡æ¥åˆå§‹åŒ– stateã€‚

### ä½¿ç”¨ State

æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç»„ä»¶ä¸­çš„å¤šå¤„åœ°æ–¹é€šè¿‡ `this.state` çš„æ–¹å¼æ¥ä½¿ç”¨ stateï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨è¿™ä¸€èŠ‚ä¸­å°†è®²åˆ°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ï¼Œæ¯”å¦‚åœ¨ render æ–¹æ³•ä¸­ï¼š

```JavaScript
class App extends React.Component {
  constructor(props) {
    super(props);

    this.state = {
      todoList: ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"]
    };
  }

  render() {
    return (
      <ul>
        <Todo content={this.state.todoList[0]} />
        <Todo content={this.state.todoList[1]} />
        <Todo content={this.state.todoList[2]} />
        <Todo content={this.state.todoList[3]} />
      </ul>
    );
  }
}
```

æˆ‘ä»¬é€šè¿‡ `this.state.todoList` å¯ä»¥è·å–æˆ‘ä»¬åœ¨ `constructor` æ–¹æ³•ä¸­å®šä¹‰çš„ stateï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨ `this.state.todoList[0]` çš„æ–¹å¼æ›¿ä»£äº†ä¹‹å‰çš„ `todoList[0]`ã€‚

### æ›´æ–° State

æˆ‘ä»¬é€šè¿‡ `this.setState` æ–¹æ³•æ¥æ›´æ–° stateï¼Œä»è€Œä½¿å¾—ç½‘é¡µå†…å®¹åœ¨æ¸²æŸ“ä¹‹åè¿˜èƒ½å˜åŒ–ï¼š

```JavaScript
this.setState({ todoList: newTodoList });
```

{% note warning %}
**æ³¨æ„**

å…³äº `this.setState` æˆ‘ä»¬éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š

1ï¼‰è¿™é‡Œä¸èƒ½å¤Ÿé€šè¿‡ç›´æ¥ä¿®æ”¹ `this.state` çš„æ–¹å¼æ¥æ›´æ–° `state`:

```JavaScript
// é”™è¯¯çš„
this.state.todoList = newTodoList;
```

2ï¼‰State çš„æ›´æ–°æ˜¯åˆå¹¶æ›´æ–°çš„ï¼š

æ¯”å¦‚åŸ `state` æ˜¯è¿™æ ·çš„ï¼š

```JavaScript
constructor(props) {
    super(props);
    this.state = {
      todoList: [],
      nowTodo: '',
    };
  }
```

ç„¶åä½ è°ƒç”¨ `this.setState()` æ–¹æ³•æ¥æ›´æ–° `state`:

```JavaScript
this.setState({ nowTodo: "Hello, å›¾é›€" });
```

React å°†ä¼šåˆå¹¶æ›´æ–°ï¼Œå³å°† `nowTodo` çš„æ–°å†…å®¹åˆå¹¶è¿›åŸ `this.state`ï¼Œå½“æ›´æ–°ä¹‹åï¼Œæˆ‘ä»¬çš„ `this.state` å°†ä¼šæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š

```JavaScript
this.state = { todoList: [], nowTodo: "Hello, å›¾é›€" };
```

ä¸ä¼šå› ä¸ºåªå•ç‹¬è®¾ç½®äº† `nowTodo` çš„å€¼ï¼Œå°±å°† `todoList` ç»™è¦†ç›–æ‰ã€‚
{% endnote %}

### ç”Ÿå‘½å‘¨æœŸå‡½æ•°

React æä¾›ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¥è¿½è¸ªä¸€ä¸ªç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„å…¨è¿‡ç¨‹ã€‚ä¸»è¦åŒ…å«ä¸‰ä¸ªæ–¹é¢ï¼š

- æŒ‚è½½ï¼ˆMountingï¼‰
- æ›´æ–°ï¼ˆUpdatingï¼‰
- å¸è½½ï¼ˆUnmountingï¼‰

ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ç”Ÿå‘½å‘¨æœŸçš„å›¾ç¤ºæ˜¯è¿™æ ·çš„ï¼š

![](https://static.powerformer.com/c/07acf61/image-8c0b915b0ef1289a.png)

{% note warning %}
**æ³¨æ„**

React ç”Ÿå‘½å‘¨æœŸç›¸å¯¹è€Œè¨€æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬è¿™é‡Œä¸ä¼šè¯¦ç»†è®²è§£æ¯ä¸ªéƒ¨åˆ†ï¼Œä¸Šé¢çš„å›¾ç¤ºç”¨æˆ·å¯ä»¥è¯•ç€äº†è§£ä¸€ä¸‹ï¼Œå¯¹å®ƒæœ‰ä¸ªå¤§æ¦‚çš„å°è±¡ã€‚

æŸ¥çœ‹å®Œæ•´ç‰ˆçš„ç”Ÿå‘½å‘¨æœŸå›¾ç¤ºè¯·å‚è€ƒè¿™ä¸ªé“¾æ¥ï¼š[ç‚¹å‡»æŸ¥çœ‹](http://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)ã€‚
{% endnote %}

è¿™é‡Œæˆ‘ä»¬ä¸»è¦è®²è§£æŒ‚è½½å’Œå¸è½½é‡Œé¢å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚

#### æŒ‚è½½

å…¶ä¸­æŒ‚è½½ä¸­ä¸»è¦å¸¸ç”¨çš„æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼š

- `constructor()`
- `render()`
- `componentDidMount()`

`constructor()` åœ¨ç»„ä»¶åˆ›å»ºæ—¶è°ƒç”¨ï¼Œå¦‚æœä½ ä¸éœ€è¦åˆå§‹åŒ– `State` ï¼Œå³ä¸éœ€è¦ `{% raw %}this.state = { ... }{% endraw %}` è¿™ä¸ªè¿‡ç¨‹ï¼Œé‚£ä¹ˆä½ ä¸éœ€è¦å®šä¹‰è¿™ä¸ªæ–¹æ³•ã€‚

`render()` æ–¹æ³•æ˜¯æŒ‚è½½æ—¶ç”¨æ¥æ¸²æŸ“å†…å®¹çš„æ–¹æ³•ï¼Œæ¯ä¸ªç±»ç»„ä»¶éƒ½éœ€è¦ä¸€ä¸ª render æ–¹æ³•ã€‚

`componentDidMount()` æ–¹æ³•æ˜¯å½“ç»„ä»¶æŒ‚è½½åˆ° DOM èŠ‚ç‚¹ä¸­ä¹‹åä¼šè°ƒç”¨çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨è¿™é‡Œå‘èµ·ä¸€äº›å¼‚æ­¥æ“ä½œï¼Œç”¨äºè·å–æœåŠ¡å™¨ç«¯çš„æ•°æ®ç­‰ã€‚

#### å¸è½½

å¸è½½åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š

- `componentWillUnmount()`

componentWillUnmount æ˜¯å½“ç»„ä»¶ä» DOM èŠ‚ç‚¹ä¸­å¸è½½ä¹‹å‰ä¼šè°ƒç”¨çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨è¿™é‡Œé¢é”€æ¯å®šæ—¶å™¨ç­‰ä¼šå¯¼è‡´å†…å­˜æ³„éœ²çš„å†…å®¹ã€‚

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨åœ¨è¿™ä¸€èŠ‚ä¸­å­¦åˆ°çš„ State å’Œç”Ÿå‘½å‘¨æœŸçŸ¥è¯†æ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

æ‰“å¼€ `src/index.js`ï¼Œå¯¹ä»£ç åšå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/6ed0b12/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
import React from "react";
import ReactDOM from "react-dom";

[tuture-add]const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
[tuture-add]
class Todo extends React.Component {
  render() {
    return <li>Hello, {this.props.content}</li>;
  // ...
}

class App extends React.Component {
[tuture-add]  constructor(props) {
[tuture-add]    super(props);
[tuture-add]
[tuture-add]    this.state = {
[tuture-add]      todoList: []
[tuture-add]    };
[tuture-add]  }
[tuture-add]
[tuture-add]  componentDidMount() {
[tuture-add]    this.timer = setTimeout(() => {
[tuture-add]      this.setState({
[tuture-add]        todoList: todoList
[tuture-add]      });
[tuture-add]    }, 2000);
[tuture-add]  }
[tuture-add]
[tuture-add]  componentWillUnmount() {
[tuture-add]    clearTimeout(this.timer);
[tuture-add]  }
[tuture-add]
  render() {
[tuture-del]    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    return (
      <ul>
[tuture-del]        <Todo content={todoList[0]} />
[tuture-del]        <Todo content={todoList[1]} />
[tuture-del]        <Todo content={todoList[2]} />
[tuture-del]        <Todo content={todoList[3]} />
[tuture-add]        <Todo content={this.state.todoList[0]} />
[tuture-add]        <Todo content={this.state.todoList[1]} />
[tuture-add]        <Todo content={this.state.todoList[2]} />
[tuture-add]        <Todo content={this.state.todoList[3]} />
      </ul>
    );
  }
// ...
```

å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ä¸»è¦æ”¹åŠ¨äº†äº”ä¸ªéƒ¨åˆ†ï¼š

- å°† todoList ç§»åŠ¨åˆ°ç»„ä»¶å¤–é¢ã€‚
- å®šä¹‰ constructor æ–¹æ³•ï¼Œå¹¶ä¸”é€šè¿‡è®¾ç½® `{% raw %}this.state = { todoList: [] }{% endraw %}` æ¥åˆå§‹åŒ–ç»„ä»¶çš„ Stateï¼Œè¿™é‡Œæˆ‘ä»¬å°† `todoList` åˆå§‹åŒ–ä¸ºç©ºæ•°ç»„ã€‚
- æ·»åŠ  `componentDidMount` ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œå½“ç»„ä»¶æŒ‚è½½åˆ° DOM èŠ‚ç‚¹ä¹‹åï¼Œè®¾ç½®ä¸€ä¸ªæ—¶é—´ä¸º 2S çš„å®šæ—¶å™¨ï¼Œå¹¶èµ‹å€¼ç»™ `this.timer`ï¼Œç”¨äºåœ¨ç»„ä»¶å¸è½½æ—¶é”€æ¯å®šæ—¶å™¨ã€‚ç­‰åˆ° 2S ä¹‹åï¼Œä½¿ç”¨ `{% raw %}this.setState({ todoList: todoList }){% endraw %}` æ¥ä½¿ç”¨æˆ‘ä»¬åˆšåˆšç§»åŠ¨åˆ°ç»„ä»¶å¤–é¢çš„ todoList æ¥æ›´æ–°ç»„ä»¶çš„ `this.state.todoList`ã€‚
- æ·»åŠ  `componentWillUnMount` ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œé€šè¿‡ `clearTimeout(this.timer)` æ¥æ¸…é™¤æˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„å®šæ—¶å™¨ï¼Œé˜²æ­¢å‡ºç°å†…å­˜æ³„éœ²ã€‚

ä¿å­˜ä¿®æ”¹çš„ä»£ç ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šçœ‹åˆ°æµè§ˆå™¨ä¸­æœ‰ä¸€ä¸ªå†…å®¹æ›´æ–°çš„è¿‡ç¨‹ï¼Œåœ¨ç»„ä»¶åˆšåˆšåˆ›å»ºå¹¶æŒ‚è½½æ—¶ï¼Œæµè§ˆå™¨å±å¹•ä¸Šåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

![](https://static.powerformer.com/c/07acf61/image-da8fa8dd48f49c0a.png)

å› ä¸ºæˆ‘ä»¬åœ¨ `this.state` åˆå§‹åŒ–æ—¶ï¼Œå°† `todoList` è®¾ç½®ä¸ºäº†ç©ºæ•°ç»„ï¼Œæ‰€ä»¥ä¸€å¼€å§‹ `"Hello"` åé¢çš„ `this.props.content` å†…å®¹ä¸ºç©ºï¼Œæˆ‘ä»¬å°±å‡ºç°äº†å››ä¸ª `"Hello, "`ã€‚

ç„¶åå½“è¿‡äº† 2S ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç†Ÿæ‚‰çš„å†…å®¹å‡ºç°äº†ï¼š

![](https://static.powerformer.com/c/07acf61/image-1ccb228d6f96581c.png)

å› ä¸ºåœ¨è¿‡äº† 2S ä¹‹åï¼Œæˆ‘ä»¬åœ¨å®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ä¸­å°† `todoList` è®¾ç½®ä¸ºäº†å®šä¹‰åœ¨ç»„ä»¶å¤–é¢çš„é‚£ä¸ª `todoList` æ•°ç»„ï¼Œå®ƒæœ‰å››ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥æ˜¾ç¤ºåœ¨æµè§ˆå™¨ä¸Šé¢çš„å†…å®¹åˆæ˜¯æˆ‘ä»¬ä¹‹å‰çš„æ ·å­ã€‚

æ­å–œä½ ï¼æˆåŠŸåˆ›å»ºäº†è‡ªå·±ç¬¬ä¸€ä¸ªäº¤äº’å¼çš„ç»„ä»¶ï¼

è¯»åˆ°è¿™é‡Œï¼Œä½ æœ‰å¯èƒ½æœ‰ç‚¹ç´¯äº†ï¼Œè¯•ç€ç¦»å¼€åº§æ¤…ï¼Œæ´»åŠ¨æ´»åŠ¨ï¼Œå–æ¯å’–å•¡ï¼Œç²¾å½©ç¨åç»§ç»­ ğŸ™ƒ

## åˆ—è¡¨å’Œ Key

ç›®å‰æˆ‘ä»¬æœ‰å››ä¸ª Todo ç»„ä»¶ï¼Œæˆ‘ä»¬æ˜¯ä¸€ä¸ªä¸€ä¸ªå–å€¼ç„¶åæ¸²æŸ“ï¼Œè¿™æ˜¾å¾—æœ‰ç‚¹åŸå§‹ï¼Œå¹¶ä¸”ä¸å¯æ‰©å±•ï¼Œå› ä¸ºå½“æˆ‘ä»¬çš„ todoList æ•°ç»„å¾ˆå¤§çš„æ—¶å€™ï¼ˆæ¯”å¦‚ 100 ä¸ªå…ƒç´ ï¼‰ï¼Œä¸€ä¸ªä¸€ä¸ªè·å–å°±æ˜¾å¾—ä¸åˆ‡å®é™…äº†ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¾ªç¯ä»‹å…¥äº†ã€‚

### æ¸²æŸ“ç»„ä»¶åˆ—è¡¨

JSX å…è®¸æˆ‘ä»¬æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨ï¼š

```JavaScript
render() {
    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    const renderTodoList = todoList.map((todo) => (
      <Todo content={todo} />
    ));
    return (
      <ul>
        {renderTodoList}
      </ul>
    );
  }
```

æˆ‘ä»¬é€šè¿‡å¯¹ todoList è¿›è¡Œ `map` éå†ï¼Œè¿”å›äº†ä¸€ä¸ª Todo åˆ—è¡¨ï¼Œç„¶åä½¿ç”¨ `{% raw %}{}{% endraw %}` æ’å€¼è¯­æ³•æ¸²æŸ“è¿™ä¸ªåˆ—è¡¨ã€‚

å½“ç„¶æˆ‘ä»¬å¯ä»¥åœ¨ JSX ä¸­ä½¿ç”¨è¡¨è¾¾å¼ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å¯ä»¥å†™æˆè¿™æ ·ï¼š

```JavaScript
render() {
    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    return (
      <ul>
        {todoList.map((todo) => (
          <Todo content={todo} />
        ))}
      </ul>
    );
  }
```

### åŠ ä¸Š Key

React è¦æ±‚ç»™åˆ—è¡¨ä¸­æ¯ä¸ªç»„ä»¶åŠ ä¸Š `key` å±æ€§ï¼Œç”¨äºæ ‡å¿—åœ¨åˆ—è¡¨ä¸­è¿™ä¸ªç»„ä»¶çš„èº«ä»½ï¼Œè¿™æ ·å½“åˆ—è¡¨å†…å®¹è¿›è¡Œäº†ä¿®æ”¹ï¼šå¢åŠ æˆ–åˆ é™¤äº†å…ƒç´ æ—¶ï¼ŒReact å¯ä»¥æ ¹æ® `key` å±æ€§é«˜æ•ˆçš„å¯¹åˆ—è¡¨ç»„ä»¶è¿›è¡Œåˆ›å»ºå’Œé”€æ¯æ“ä½œï¼š

```JavaScript
render() {
    const todoList = ["å›¾é›€", "å›¾é›€å†™ä½œå·¥å…·", "å›¾é›€ç¤¾åŒº", "å›¾é›€æ–‡æ¡£"];
    return (
      <ul>
        {todoList.map((todo, index) => (
          <Todo content={todo} key={index} />
        ))}
      </ul>
    );
  }
```

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†åˆ—è¡¨çš„ `index` ä½œä¸ºç»„ä»¶çš„ `key` å€¼ï¼ŒReact ç¤¾åŒºæ¨èçš„æœ€ä½³å®è·µæ–¹å¼æ˜¯ä½¿ç”¨åˆ—è¡¨æ•°æ®å…ƒç´ çš„å”¯ä¸€æ ‡è¯†ç¬¦ä½œä¸º `key` å€¼ï¼Œå¦‚æœä½ çš„æ•°æ®æ˜¯æ¥è‡ªæ•°æ®åº“è·å–ï¼Œé‚£ä¹ˆåˆ—è¡¨å…ƒç´ æ•°æ®çš„ä¸»é”®å¯ä»¥ä½œä¸º `key`ã€‚

è¿™é‡Œçš„ `key` å€¼ä¸ä¼šä½œä¸º [props](#props) ä¼ é€’ç»™å­ç»„ä»¶ï¼ŒReact ä¼šåœ¨ç¼–è¯‘ç»„ä»¶æ—¶å°† `key` å€¼ä» props ä¸­æ’é™¤ï¼Œå³æœ€ç»ˆæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª Todo ç»„ä»¶çš„ `props` å¦‚ä¸‹ï¼š

```JavaScript
props = { content: "å›¾é›€" }
```

è€Œä¸æ˜¯æˆ‘ä»¬è®¤ä¸ºçš„ï¼š

```JavaScript
props = { content: "å›¾é›€", key: 0 }
```

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨è¿™ä¸€èŠ‚å­¦åˆ°çš„åˆ—è¡¨å’Œ Key çš„çŸ¥è¯†æ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

æ‰“å¼€ `src/index.js`ï¼Œå¯¹å†…å®¹åšå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/3c0e1f2/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...
  render() {
    return (
      <ul>
[tuture-del]        <Todo content={this.state.todoList[0]} />
[tuture-del]        <Todo content={this.state.todoList[1]} />
[tuture-del]        <Todo content={this.state.todoList[2]} />
[tuture-del]        <Todo content={this.state.todoList[3]} />
[tuture-add]        {this.state.todoList.map((todo, index) => (
[tuture-add]          <Todo content={todo} key={index} />
[tuture-add]        ))}
      </ul>
    );
  }
// ...
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°†ä¹‹å‰çš„æ‰‹åŠ¨è·å–å…ƒç´ æ¸²æŸ“æ”¹æˆäº†ä½¿ç”¨å†…åµŒè¡¨è¾¾å¼çš„æ–¹å¼ï¼Œé€šè¿‡å¯¹ `this.state.todoList` åˆ—è¡¨è¿›è¡Œ map æ“ä½œç”Ÿæˆ Todo ç»„ä»¶åˆ—è¡¨ï¼Œç„¶åä½¿ç”¨åˆ—è¡¨çš„ `index` ä½œä¸ºç»„ä»¶çš„ `key` å€¼ï¼Œæœ€åæ¸²æŸ“ã€‚

ä¿å­˜å†…å®¹ï¼ŒæŸ¥çœ‹æµè§ˆå™¨é‡Œé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å†…å®¹ä¼šæœ‰ä¸€ä¸ªå˜åŒ–çš„è¿‡ç¨‹ï¼Œä¸€å¼€å§‹æ˜¯è¿™æ ·çš„ï¼š

![](https://static.powerformer.com/c/07acf61/image-e45392ef60489227.png)

ä½ ä¼šå‘ç°ä¸€ç‰‡ç©ºç™½ï¼Œç„¶åè¿‡äº† 2S å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š

![](https://static.powerformer.com/c/07acf61/image-1ccb228d6f96581c.png)

è¿™æ˜¯å› ä¸ºï¼Œä¸€å¼€å§‹ `this.state.todoList` åœ¨ constructor ä¸­åˆå§‹åŒ–æ—¶æ˜¯ç©ºæ•°ç»„ï¼Œ `this.state.todoList` è¿›è¡Œ map æ“ä½œæ—¶è¿”å›ç©ºæ•°ç»„ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„æµè§ˆå™¨ä¸­æ²¡æœ‰å†…å®¹ï¼Œå½“ç»„ä»¶æŒ‚è½½ä¹‹åï¼Œç­‰å¾… 2Sï¼Œæˆ‘ä»¬æ›´æ–° `this.state.todoList` å†…å®¹ï¼Œå°±çœ‹åˆ°æµè§ˆå™¨é‡Œé¢è·å¾—äº†æ›´æ–°ã€‚

## æ¡ä»¶æ¸²æŸ“

åœ¨ React ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„æƒ…å†µï¼Œæ¸²æŸ“ä¸åŒçš„å†…å®¹ï¼Œè¿™ä¹Ÿè¢«æˆä¸ºæ¡ä»¶æ¸²æŸ“ã€‚

### if-else æ¡ä»¶æ¸²æŸ“

```JavaScript
render() {
    if (this.props.content === "å›¾é›€") {
      return <li>ä½ å¥½, {this.props.content}</li>;
    } else {
      return <li>Hello, {this.props.content}</li>;
    }
  }
```

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ¤æ–­ `this.props.content` çš„å†…å®¹ï¼Œå½“å†…å®¹ä¸º `"å›¾é›€"` æ—¶ï¼Œæˆ‘ä»¬æ¸²æŸ“ `"ä½ å¥½, å›¾é›€"`ï¼Œå¯¹äºå…¶ä»–å†…å®¹æˆ‘ä»¬ä¾ç„¶æ¸²æŸ“ `"Hello, å›¾é›€"`ã€‚

### ä¸‰å…ƒè¡¨è¾¾å¼æ¡ä»¶æ¸²æŸ“

æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥åœ¨ JSX ä¸­ä½¿ç”¨ä¸‰å…ƒè¡¨è¾¾å¼è¿›è¡Œæ¡ä»¶æ¸²æŸ“ï¼š

```JavaScript
render() {
    return this.props.content === "å›¾é›€"? (
      <li>ä½ å¥½, {this.props.content}</li>
    ) : (
      <li>Hello, {this.props.content}</li>
    );
  }
```

å½“ç„¶ä¸‰å…ƒè¡¨è¾¾å¼è¿˜å¯ä»¥ç”¨æ¥æ¡ä»¶æ¸²æŸ“ä¸åŒçš„ React å…ƒç´ å±æ€§ï¼š

```JavaScript
render() {
    return (
      <li className={this.state.isClicked ? 'clicked' : 'notclicked'}>Hello, {this.props.content}</li>
    )
  }
```

ä¸Šé¢æˆ‘ä»¬åˆ¤æ–­ç»„ä»¶çš„ `this.state.isClicked` å±æ€§ï¼Œå¦‚æœ `this.state.isClicked` å±æ€§ä¸º `true`ï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ€ç»ˆæ¸²æŸ“ `"clicked"` ç±»ï¼š

```JavaScript
render() {
    return (
      <li className="clicked"}>Hello, {this.props.content}</li>
    )
  }
```

å¦‚æœ `this.state.isClicked` ä¸º `false`ï¼Œé‚£ä¹ˆæœ€ç»ˆæ¸²æŸ“ `notclicked` ç±»ï¼š

```JavaScript
render() {
    return (
      <li className="notclicked">Hello, {this.props.content}</li>
    )
  }
```

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨æœ¬èŠ‚å­¦åˆ°çš„çŸ¥è¯†ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

æ‰“å¼€ `src/index.js` ï¼Œå¯¹ App å’Œ Todo ç»„ä»¶ä½œå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/28b10dc/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...

class Todo extends React.Component {
  render() {
[tuture-add]    if (this.props.index % 2 === 0) {
[tuture-add]      return <li style={{ color: "red" }}>Hello, {this.props.content}</li>;
[tuture-add]    }
[tuture-add]
    return <li>Hello, {this.props.content}</li>;
  }
}
 // ...
    return (
      <ul>
        {this.state.todoList.map((todo, index) => (
[tuture-del]          <Todo content={todo} key={index} />
[tuture-add]          <Todo content={todo} key={index} index={index} />
        ))}
      </ul>
    );
  // ...
```

æˆ‘ä»¬åœ¨é¦–å…ˆåœ¨ App ç»„ä»¶ä¸­ç»™ Todo ç»„ä»¶ä¼ å…¥äº†ä¸€ä¸ª `index` å±æ€§ï¼Œç„¶ååœ¨ Todo ç»„ä»¶çš„ render æ–¹æ³•ä¸­ï¼Œå¯¹ `this.props.index` è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸ºå¶æ•°ï¼Œé‚£ä¹ˆæ¸²æŸ“ä¸€ä¸ªçº¢è‰²çš„æ–‡å­—ï¼Œå¦‚æœä¸ºå¥‡æ•°åˆ™ä¿æŒä¸å˜ã€‚

è¿™é‡Œæˆ‘ä»¬é€šè¿‡ç»™ `li` å…ƒç´ çš„ `style` å±æ€§èµ‹å€¼ä¸€ä¸ªå¯¹è±¡æ¥å®ç°åœ¨ JSX ä¸­è®¾ç½®å…ƒç´ çš„ CSS å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŒæ ·çš„æ–¹å¼è®¾ç½®ä»»ä½• CSS å±æ€§ï¼š

```JavaScript
// é»‘åº•çº¢å­—çš„ Hello, å›¾é›€
<li style={{ color: "red", backgroundColor: "black"}}>Hello, å›¾é›€</li>
```

{% note warning %}
**æ³¨æ„**

è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦åšä¸€ä¸‹æ”¹å˜ï¼Œå°±æ˜¯åƒ `background-color` è¿™æ ·çš„å±æ€§ï¼Œè¦å†™æˆé©¼å³°å¼ `backgroundColor`ã€‚å¯¹åº”çš„æ¯”å¦‚ `font-size`ï¼Œä¹Ÿè¦å†™æˆ `fontSize`ã€‚
{% endnote %}

ä¿å­˜ä»£ç ï¼Œä½ åº”è¯¥å¯ä»¥åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-fb5aa12d4320c007.png)

æˆ‘ä»¬çœ‹åˆ°æµè§ˆå™¨ä¸­çš„æ•ˆæœç¡®å®æ˜¯åœ¨å¶æ•°é¡¹ï¼ˆæ•°ç»„ä¸­ 0 å’Œ 2 é¡¹ï¼‰å˜æˆäº†çº¢è‰²çš„å­—ä½“ï¼Œè€Œï¼ˆæ•°ç»„ä¸­ 1 å’Œ 3 é¡¹ï¼‰è¿˜æ˜¯ä¹‹å‰çš„é»‘è‰²æ ·å¼ã€‚

## äº‹ä»¶å¤„ç†

åœ¨ React å…ƒç´ ä¸­å¤„ç†äº‹ä»¶å’Œåœ¨ HTML ä¸­ç±»ä¼¼ï¼Œå°±æ˜¯å†™æ³•æœ‰ç‚¹ä¸ä¸€æ ·ã€‚

### JSX ä¸­çš„äº‹ä»¶å¤„ç†

è¿™é‡Œçš„ä¸ä¸€æ ·ä¸»è¦åŒ…å«ä»¥ä¸‹ä¸¤ç‚¹ï¼š

- React ä¸­çš„äº‹ä»¶è¦ä½¿ç”¨é©¼å³°å¼å‘½åï¼š`onClick`ï¼Œè€Œä¸æ˜¯å…¨å°å†™ï¼š`onclick`ã€‚
- åœ¨ JSX ä¸­ï¼Œä½ ä¼ é€’çš„æ˜¯ä¸€ä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

åœ¨ HTML ä¸­ï¼Œæˆ‘ä»¬å¤„ç†äº‹ä»¶æ˜¯è¿™æ ·çš„ï¼š

```HTML
<button onclick="handleClick()">ç‚¹æˆ‘</button>
```

åœ¨ React ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å†™æˆä¸‹é¢è¿™æ ·ï¼š

```JavaScript
function Button() {
  function handleClick() {
    console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†');
  }

  return (
    <button onClick={handleClick}>ç‚¹æˆ‘</button>
  )
}
```

æ³¨æ„åˆ°æˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ï¼Œç„¶åè¿”å›ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶åœ¨æŒ‰é’®ä¸Šé¢å®šä¹‰äº†ç‚¹å‡»äº‹ä»¶å’Œå¯¹åº”çš„å¤„ç†æ–¹æ³•ã€‚

{% note warning %}
**æ³¨æ„**

è¿™é‡Œæˆ‘ä»¬çš„çš„ç‚¹å‡»äº‹ä»¶ä½¿ç”¨äº†é©¼å³°å¼çš„ `onClick` æ¥å‘½åï¼Œå¹¶ä¸”åœ¨ JSX ä¸­ä¼ ç»™äº‹ä»¶çš„å±æ€§æ˜¯ä¸€ä¸ªå‡½æ•°ï¼š`handleClick` ï¼Œè€Œä¸æ˜¯ä¹‹å‰ HTML ä¸­å•çº¯çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š`"handleClick()"`ã€‚
{% endnote %}

### åˆæˆäº‹ä»¶

æˆ‘ä»¬åœ¨ä»¥å‰ç¼–å†™ HTML çš„äº‹ä»¶å¤„ç†æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†è¡¨å•æ—¶ï¼Œå¸¸å¸¸éœ€è¦ç¦ç”¨æµè§ˆå™¨çš„é»˜è®¤å±æ€§ã€‚

{% note info %}
**æç¤º**

æ¯”å¦‚ä¸€èˆ¬è¡¨å•æäº¤æ—¶éƒ½ä¼šåˆ·æ–°æµè§ˆå™¨ï¼Œä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™å¸Œæœ›æäº¤è¡¨å•ä¹‹åä¸åˆ·æ–°æµè§ˆå™¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¦ç”¨æµè§ˆå™¨çš„é»˜è®¤å±æ€§ã€‚
{% endnote %}

åœ¨ HTML ä¸­æˆ‘ä»¬ç¦ç”¨äº‹ä»¶çš„é»˜è®¤å±æ€§æ˜¯é€šè¿‡è°ƒç”¨å®šä¹‰åœ¨äº‹ä»¶ä¸Šçš„ `preventDefault` æˆ–è€…è®¾ç½®äº‹ä»¶çš„ `cancelBubble`ï¼š

```JavaScript
// å½“ç‚¹å‡»æŸä¸ªé“¾æ¥ä¹‹åï¼Œç¦æ­¢æ‰“å¼€é¡µé¢
document.getElementById("myAnchor").addEventListener("click", function(event){
  event.preventDefault()
});
```

åœ¨ JSX ä¸­ï¼Œäº‹ä»¶å¤„ç†å’Œè¿™ä¸ªç±»ä¼¼ï¼š

```JavaScript
function Link() {
  function handleClick(event)  {
    event.preventDefault();
    console.log('é“¾æ¥è¢«ç‚¹å‡»äº†ï¼Œä½†æ˜¯å®ƒä¸ä¼šè·³è½¬é¡µé¢ï¼Œå› ä¸ºé»˜è®¤è¡Œä¸ºè¢«ç¦ç”¨äº†');
  }

  return (
    <a onClick={handleClick} href="https://tuture.co">ç‚¹æˆ‘</a>
  )
}
```

### å®æˆ˜

æˆ‘ä»¬è¿ç”¨è¿™ä¸€èŠ‚ä¸­å­¦åˆ°çš„çŸ¥è¯†æ¥ç»§ç»­å®Œæˆæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚

æˆ‘ä»¬ä¹‹å‰çš„å¾…åŠäº‹é¡¹çš„ todoList æ•°ç»„éƒ½æ˜¯ç›´æ¥ç¡¬ç¼–ç åœ¨ä»£ç é‡Œï¼Œä¸å¯ä»¥è¿›è¡Œå¢åˆ æ”¹ï¼Œè¿™ç›¸å½“æ­»æ¿ï¼Œä¸€ä¸ªæ›´çœŸå®çš„ todoList åº”è¯¥è¦å…·å¤‡å¢åŠ åŠŸèƒ½ï¼Œè¿™ä¸€åŠŸèƒ½å®ç°éœ€è¦ä¸¤ä¸ªæ­¥éª¤ï¼š

- å…è®¸ç”¨æˆ·è¾“å…¥æ–°çš„å¾…åŠäº‹é¡¹ã€‚
- å°†è¿™ä¸ªè¾“å…¥çš„å¾…åŠäº‹é¡¹åŠ å…¥åˆ°ç°æœ‰çš„ todoList åˆ—è¡¨é‡Œé¢ã€‚

åœ¨è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æ¥å®ç°ç¬¬ä¸€ä¸ªæ­¥éª¤çš„å†…å®¹ã€‚

æ‰“å¼€ `src/index.js` ï¼Œå¯¹ App ç»„ä»¶å†…å®¹ä½œå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/b77bcab/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...
    super(props);

    this.state = {
[tuture-add]      nowTodo: "",
      todoList: []
    };
  }
 // ...
    clearTimeout(this.timer);
  }

[tuture-add]  handleChange(e) {
[tuture-add]    this.setState({
[tuture-add]      nowTodo: e.target.value
[tuture-add]    });
[tuture-add]  }
[tuture-add]
  render() {
    return (
[tuture-del]      <ul>
[tuture-del]        {this.state.todoList.map((todo, index) => (
[tuture-del]          <Todo content={todo} key={index} index={index} />
[tuture-del]        ))}
[tuture-del]      </ul>
[tuture-add]      <div>
[tuture-add]        <div>
[tuture-add]          <input type="text" onChange={e => this.handleChange(e)} />
[tuture-add]          <div>{this.state.nowTodo}</div>
[tuture-add]        </div>
[tuture-add]        <ul>
[tuture-add]          {this.state.todoList.map((todo, index) => (
[tuture-add]            <Todo content={todo} key={index} index={index} />
[tuture-add]          ))}
[tuture-add]        </ul>
[tuture-add]      </div>
    );
  }
}
 // ...
```

å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ–°åŠ å…¥çš„ä»£ç ä¸»è¦æœ‰å››ä¸ªéƒ¨åˆ†:

- é¦–å…ˆåœ¨ state é‡Œé¢æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å±æ€§ `nowTodo`ï¼Œæˆ‘ä»¬å°†ç”¨å®ƒæ¥ä¿å­˜ç”¨æˆ·æ–°è¾“å…¥çš„å¾…åŠäº‹é¡¹ã€‚
- ç„¶åæˆ‘ä»¬åœ¨ render æ–¹æ³•é‡Œé¢ï¼Œåœ¨è¿”å›çš„ JSX ä¸­ä½¿ç”¨ `div` å°†å†…å®¹åŒ…è£¹èµ·æ¥ï¼Œæ¥ç€åŠ å…¥äº†ä¸€ä¸ª `div`ï¼Œåœ¨é‡Œé¢åŠ å…¥äº†ä¸€ä¸ª `input` å’Œ ä¸€ä¸ª `div`ï¼Œinput ç”¨äºå¤„ç†ç”¨æˆ·çš„è¾“å…¥ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰äº† `onChange` äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå®ƒæ¥æ”¶äº‹ä»¶ `e`ï¼Œç„¶åç”¨æˆ·è¾“å…¥æ—¶ï¼Œä¼šåœ¨å‡½æ•°é‡Œé¢è°ƒç”¨ `this.handleChange` æ–¹æ³•ï¼Œå°†äº‹ä»¶ `e` ä¼ ç»™è¿™ä¸ªæ–¹æ³•ã€‚
- åœ¨ `handleChange` é‡Œé¢é€šè¿‡ `this.setState` ä½¿ç”¨ input çš„å€¼æ¥æ›´æ–° `nowTodo` çš„å†…å®¹ã€‚
- æœ€ååœ¨ div é‡Œé¢ä½¿ç”¨ `{% raw %}{}{% endraw %}` æ’å€¼è¯­æ³•å±•ç¤º `nowTodo` çš„å†…å®¹ã€‚

ä¿å­˜ä»£ç ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-2a9067582bd70a07.png)

å½“ä½ å°è¯•åœ¨è¾“å…¥æ¡†ä¸­é”®å…¥å†…å®¹æ—¶ï¼Œè¾“å…¥æ¡†çš„ä¸‹é¢åº”ä¼šæ˜¾ç¤ºç›¸åŒçš„å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-479da0515331f7ba.png)

è¿™æ˜¯å› ä¸ºå½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†é‡Œé¢è¾“å…¥å†…å®¹æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¾“å…¥æ¡†çš„å€¼æ›´æ–° `this.state.nowTodo`ï¼Œç„¶ååœ¨è¾“å…¥æ¡†ä¹‹ä¸‹å±•ç¤º `this.state.nowTodo` çš„å€¼ã€‚

## è¡¨å•

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®Œæˆå¢åŠ æ–°çš„å¾…åŠäº‹é¡¹çš„åŠŸèƒ½çš„ç¬¬äºŒä¸ªæ­¥éª¤ï¼šå…è®¸ç”¨æˆ·å°†æ–°è¾“å…¥çš„å¾…åŠäº‹é¡¹åŠ å…¥åˆ° todoList åˆ—è¡¨ä¸­ã€‚

æ‰“å¼€ `src/index.js` æ–‡ä»¶ï¼Œå¯¹ App ç»„ä»¶åšå‡ºå¦‚ä¸‹ä¿®æ”¹ï¼š

```js src/index.js https://github.com/pftom/react-quickstart-tutorial/blob/8619e9f/src/index.js æŸ¥çœ‹å®Œæ•´ä»£ç 
// ...
    });
  }

[tuture-add]  handleSubmit(e) {
[tuture-add]    e.preventDefault(e);
[tuture-add]    const newTodoList = this.state.todoList.concat(this.state.nowTodo);
[tuture-add]
[tuture-add]    this.setState({
[tuture-add]      todoList: newTodoList,
[tuture-add]      nowTodo: ""
[tuture-add]    });
[tuture-add]  }
[tuture-add]
  render() {
    return (
      <div>
[tuture-del]        <div>
[tuture-add]        <form onSubmit={e => this.handleSubmit(e)}>
          <input type="text" onChange={e => this.handleChange(e)} />
[tuture-del]          <div>{this.state.nowTodo}</div>
[tuture-del]        </div>
[tuture-add]          <button type="submit">æäº¤</button>
[tuture-add]        </form>
        <ul>
          {this.state.todoList.map((todo, index) => (
            <Todo content={todo} key={index} index={index} />
          // ...
```

ä¸Šé¢çš„å˜åŒ–ä¸»è¦æœ‰ä¸‰ä¸ªéƒ¨åˆ†ï¼š

- é¦–å…ˆæˆ‘ä»¬å°† `render` æ–¹æ³•ä¸­è¿”å›çš„ JSX çš„æœ€å¤–å±‚çš„ `div` æ›¿æ¢æˆäº† `form`ï¼Œç„¶ååœ¨ä¸Šé¢å®šä¹‰äº† `onSubmit` æäº¤äº‹ä»¶ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªç®­å¤´å‡½æ•°æ¥æ”¶äº‹ä»¶ `e` æ¥è¿›è¡Œäº‹ä»¶å¤„ç†ï¼Œåœ¨ form è¢«æäº¤æ—¶ï¼Œåœ¨ç®­å¤´å‡½æ•°é‡Œé¢ä¼šè°ƒç”¨ `handleSubmit` æ–¹æ³•ï¼Œ å¹¶å°† e ä¼ é€’ç»™è¿™ä¸ªå‡½æ•°ã€‚
- åœ¨ handleSubmit æ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨äº† `e.preventDefault()` æ–¹æ³•ï¼Œæ¥ç¦æ­¢æµè§ˆå™¨çš„é»˜è®¤äº‹ä»¶å¤„ç†ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æäº¤è¡¨å•ä¹‹åï¼Œæµè§ˆå™¨å°±ä¸ä¼šåˆ·æ–°ï¼Œä¹‹åæ˜¯å°†ç°æœ‰çš„ `this.sate.todoList` åˆ—è¡¨åŠ ä¸Šæ–°è¾“å…¥çš„ `nowTodo`ï¼Œæœ€åæ˜¯ä½¿ç”¨ `this.setState` æ›´æ–° `todoList` å’Œ `nowTodo`ï¼›è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¾“å…¥å†…å®¹æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹äº†ã€‚
- æ¥ç€æˆ‘ä»¬å°†ä¹‹å‰çš„å±•ç¤º `this.state.nowTodo` çš„ div æ›¿æ¢æˆ æäº¤æŒ‰é’® `button`ï¼Œå¹¶å°† button çš„ `type` è®¾ç½®ä¸º `submit` å±æ€§ï¼Œè¡¨ç¤ºåœ¨ç‚¹å‡»è¿™ä¸ª button ä¹‹åï¼Œä¼šè§¦å‘è¡¨å•æäº¤ï¼›å°†æ–°è¾“å…¥çš„å†…å®¹åŠ å…¥ç°æœ‰çš„å¾…åŠäº‹é¡¹ä¸­ã€‚

{% note warning %}
**æ³¨æ„**

æˆ‘ä»¬åœ¨ `handleSubmit` æ–¹æ³•é‡Œé¢ä½¿ç”¨ `this.setState` æ›´æ–°çŠ¶æ€æ—¶ï¼Œå°† `nowTodo` è®¾ç½®ä¸ºäº†ç©ºå­—ç¬¦ä¸²ï¼Œä»£è¡¨æˆ‘ä»¬åœ¨åŠ å…¥æ–°çš„å¾…åŠäº‹é¡¹ä¹‹åï¼Œå°†æ¸…é™¤ç°æœ‰è¾“å…¥çš„ nowTodo å¾…åŠäº‹é¡¹å†…å®¹ã€‚
{% endnote %}

ä¿å­˜ä»£ç ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåœ¨è¾“å…¥æ¡†é‡Œé¢è¾“å…¥ç‚¹ä¸œè¥¿ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-fdd2b6a88757dfa6.png)

å½“ä½ ç‚¹å‡»æäº¤æŒ‰é’®ä¹‹åï¼Œæ–°çš„å¾…åŠäº‹é¡¹ä¼šåŠ å…¥åˆ°ç°æœ‰çš„ todoList åˆ—è¡¨ä¸­ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å†…å®¹ï¼š

![](https://static.powerformer.com/c/07acf61/image-37a930ad1485173f.png)

æ­å–œä½ ï¼ä½ æˆåŠŸä½¿ç”¨ React å®Œæˆäº†ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åº”ç”¨ï¼Œå®ƒå¯ä»¥å®Œæˆå¦‚ä¸‹çš„åŠŸèƒ½ï¼š

- å¼‚æ­¥è·å–å°†è¦å±•ç¤ºçš„å¾…åŠäº‹é¡¹ï¼štodoList
- å°†å¾…åŠäº‹é¡¹å±•ç¤ºå‡ºæ¥
- å¶æ•°é¡¹å¾…åŠäº‹é¡¹å°†ä¼šå±•ç¤ºæˆçº¢è‰²
- å¯ä»¥æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹

åšå¾—å¥½ï¼æˆ‘ä»¬å¸Œæœ›ä½ ç°åœ¨å·²ç»å¯¹ React çš„è¿è¡Œæœºåˆ¶æœ‰äº†ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„äº†è§£ï¼Œä¹Ÿå¸Œæœ›æœ¬ç¯‡æ•™ç¨‹èƒ½å¤Ÿä¸ºä½ è¸å…¥ React å¼€å‘ä¸–ç•Œæä¾›ä¸€ä¸ªå¥½çš„å¼€å§‹ï¼æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼

### åè®°

å—é™äºç¯‡å¹…ï¼Œæˆ‘ä»¬çš„å¾…åŠäº‹é¡¹è¿˜ä¸å®Œæ•´ï¼Œå¦‚æœä½ æœ‰é¢å¤–çš„æ—¶é—´æˆ–è€…ä½ æƒ³è¦ç»ƒä¹ ä½ æ–°å­¦åˆ°çš„ React çŸ¥è¯†ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä½¿æˆ‘ä»¬çš„å¾…åŠäº‹é¡¹å˜å¾—å®Œæ•´çš„ä¸€äº›æƒ³æ³•ï¼Œæˆ‘ä»¬å°†æŒ‰å®ç°éš¾åº¦ç»™è¿™äº›åŠŸèƒ½æ’åºï¼š

- åœ¨æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹ä¹‹åï¼Œæ¸…ç©ºè¾“å…¥æ¡†é‡Œé¢çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¸‹ä¸€æ¬¡è¾“å…¥ã€‚è¿™æ ·æ¶‰åŠåˆ° [React å—æ§ç»„ä»¶](https://zh-hans.reactjs.org/docs/forms.html#controlled-components)çš„çŸ¥è¯†ã€‚
- å…è®¸å¯¹å•ä¸ªäº‹é¡¹è¿›è¡Œåˆ é™¤ã€‚è¿™æ¶‰åŠåˆ°å­ç»„ä»¶[ä¿®æ”¹çˆ¶ç»„ä»¶çš„çŠ¶æ€](https://zh-hans.reactjs.org/docs/lifting-state-up.html)çŸ¥è¯†ã€‚
- å…è®¸ç”¨æˆ·å¯¹å•ä¸ªäº‹é¡¹è¿›è¡Œä¿®æ”¹ã€‚
- å…è®¸ç”¨æˆ·å¯¹å¾…åŠäº‹é¡¹è¿›è¡Œæœç´¢ã€‚

{% note primary %}
**ä¸»è¦**

æ­¤æ•™ç¨‹å±äº[React å‰ç«¯å·¥ç¨‹å¸ˆå­¦ä¹ è·¯çº¿](https://github.com/tuture-dev/react-roadmap)çš„ä¸€éƒ¨åˆ†ï¼Œç‚¹å‡»å¯æŸ¥çœ‹å…¨éƒ¨å†…å®¹ã€‚
{% endnote %}
